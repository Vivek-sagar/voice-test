/*!
 * Copyright Keen Research
 */
var e="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};var t={};({get exports(){return t},set exports(e){t=e}}).exports=function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.m=e,r.c=t,r.d=function(e,t,i){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(r.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(i,n,function(t){return e[t]}.bind(null,n));return i},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=90)}({17:function(e,t,r){t.__esModule=!0,t.default=void 0;var i=r(18),n=function(){function e(){}return e.getFirstMatch=function(e,t){var r=t.match(e);return r&&r.length>0&&r[1]||""},e.getSecondMatch=function(e,t){var r=t.match(e);return r&&r.length>1&&r[2]||""},e.matchAndReturnConst=function(e,t,r){if(e.test(t))return r},e.getWindowsVersionName=function(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},e.getMacOSVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},e.getAndroidVersionName=function(e){var t=e.split(".").splice(0,2).map((function(e){return parseInt(e,10)||0}));if(t.push(0),!(1===t[0]&&t[1]<5))return 1===t[0]&&t[1]<6?"Cupcake":1===t[0]&&t[1]>=6?"Donut":2===t[0]&&t[1]<2?"Eclair":2===t[0]&&2===t[1]?"Froyo":2===t[0]&&t[1]>2?"Gingerbread":3===t[0]?"Honeycomb":4===t[0]&&t[1]<1?"Ice Cream Sandwich":4===t[0]&&t[1]<4?"Jelly Bean":4===t[0]&&t[1]>=4?"KitKat":5===t[0]?"Lollipop":6===t[0]?"Marshmallow":7===t[0]?"Nougat":8===t[0]?"Oreo":9===t[0]?"Pie":void 0},e.getVersionPrecision=function(e){return e.split(".").length},e.compareVersions=function(t,r,i){void 0===i&&(i=!1);var n=e.getVersionPrecision(t),a=e.getVersionPrecision(r),o=Math.max(n,a),s=0,d=e.map([t,r],(function(t){var r=o-e.getVersionPrecision(t),i=t+new Array(r+1).join(".0");return e.map(i.split("."),(function(e){return new Array(20-e.length).join("0")+e})).reverse()}));for(i&&(s=o-Math.min(n,a)),o-=1;o>=s;){if(d[0][o]>d[1][o])return 1;if(d[0][o]===d[1][o]){if(o===s)return 0;o-=1}else if(d[0][o]<d[1][o])return-1}},e.map=function(e,t){var r,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)i.push(t(e[r]));return i},e.find=function(e,t){var r,i;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,i=e.length;r<i;r+=1){var n=e[r];if(t(n,r))return n}},e.assign=function(e){for(var t,r,i=e,n=arguments.length,a=new Array(n>1?n-1:0),o=1;o<n;o++)a[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[e].concat(a));var s=function(){var e=a[t];"object"==typeof e&&null!==e&&Object.keys(e).forEach((function(t){i[t]=e[t]}))};for(t=0,r=a.length;t<r;t+=1)s();return e},e.getBrowserAlias=function(e){return i.BROWSER_ALIASES_MAP[e]},e.getBrowserTypeByAlias=function(e){return i.BROWSER_MAP[e]||""},e}();t.default=n,e.exports=t.default},18:function(e,t,r){t.__esModule=!0,t.ENGINE_MAP=t.OS_MAP=t.PLATFORMS_MAP=t.BROWSER_MAP=t.BROWSER_ALIASES_MAP=void 0,t.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},t.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},t.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},t.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},t.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(e,t,r){t.__esModule=!0,t.default=void 0;var i,n=(i=r(91))&&i.__esModule?i:{default:i},a=r(18);function o(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}var s=function(){function e(){}var t,r,i;return e.getParser=function(e,t){if(void 0===t&&(t=!1),"string"!=typeof e)throw new Error("UserAgent should be a string");return new n.default(e,t)},e.parse=function(e){return new n.default(e).getResult()},t=e,i=[{key:"BROWSER_MAP",get:function(){return a.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return a.ENGINE_MAP}},{key:"OS_MAP",get:function(){return a.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return a.PLATFORMS_MAP}}],(r=null)&&o(t.prototype,r),i&&o(t,i),e}();t.default=s,e.exports=t.default},91:function(e,t,r){t.__esModule=!0,t.default=void 0;var i=d(r(92)),n=d(r(93)),a=d(r(94)),o=d(r(95)),s=d(r(17));function d(e){return e&&e.__esModule?e:{default:e}}var c=function(){function e(e,t){if(void 0===t&&(t=!1),null==e||""===e)throw new Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}var t=e.prototype;return t.getUA=function(){return this._ua},t.test=function(e){return e.test(this._ua)},t.parseBrowser=function(){var e=this;this.parsedResult.browser={};var t=s.default.find(i.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.browser=t.describe(this.getUA())),this.parsedResult.browser},t.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},t.getBrowserName=function(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},t.getBrowserVersion=function(){return this.getBrowser().version},t.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},t.parseOS=function(){var e=this;this.parsedResult.os={};var t=s.default.find(n.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.os=t.describe(this.getUA())),this.parsedResult.os},t.getOSName=function(e){var t=this.getOS().name;return e?String(t).toLowerCase()||"":t||""},t.getOSVersion=function(){return this.getOS().version},t.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},t.getPlatformType=function(e){void 0===e&&(e=!1);var t=this.getPlatform().type;return e?String(t).toLowerCase()||"":t||""},t.parsePlatform=function(){var e=this;this.parsedResult.platform={};var t=s.default.find(a.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.platform=t.describe(this.getUA())),this.parsedResult.platform},t.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},t.getEngineName=function(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},t.parseEngine=function(){var e=this;this.parsedResult.engine={};var t=s.default.find(o.default,(function(t){if("function"==typeof t.test)return t.test(e);if(t.test instanceof Array)return t.test.some((function(t){return e.test(t)}));throw new Error("Browser's test function is not valid")}));return t&&(this.parsedResult.engine=t.describe(this.getUA())),this.parsedResult.engine},t.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},t.getResult=function(){return s.default.assign({},this.parsedResult)},t.satisfies=function(e){var t=this,r={},i=0,n={},a=0;if(Object.keys(e).forEach((function(t){var o=e[t];"string"==typeof o?(n[t]=o,a+=1):"object"==typeof o&&(r[t]=o,i+=1)})),i>0){var o=Object.keys(r),d=s.default.find(o,(function(e){return t.isOS(e)}));if(d){var c=this.satisfies(r[d]);if(void 0!==c)return c}var u=s.default.find(o,(function(e){return t.isPlatform(e)}));if(u){var l=this.satisfies(r[u]);if(void 0!==l)return l}}if(a>0){var h=Object.keys(n),f=s.default.find(h,(function(e){return t.isBrowser(e,!0)}));if(void 0!==f)return this.compareVersion(n[f])}},t.isBrowser=function(e,t){void 0===t&&(t=!1);var r=this.getBrowserName().toLowerCase(),i=e.toLowerCase(),n=s.default.getBrowserTypeByAlias(i);return t&&n&&(i=n.toLowerCase()),i===r},t.compareVersion=function(e){var t=[0],r=e,i=!1,n=this.getBrowserVersion();if("string"==typeof n)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(i=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(i=!0,r=e.substr(1)),t.indexOf(s.default.compareVersions(n,r,i))>-1},t.isOS=function(e){return this.getOSName(!0)===String(e).toLowerCase()},t.isPlatform=function(e){return this.getPlatformType(!0)===String(e).toLowerCase()},t.isEngine=function(e){return this.getEngineName(!0)===String(e).toLowerCase()},t.is=function(e,t){return void 0===t&&(t=!1),this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)},t.some=function(e){var t=this;return void 0===e&&(e=[]),e.some((function(e){return t.is(e)}))},e}();t.default=c,e.exports=t.default},92:function(e,t,r){t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},a=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(e){var t={name:"Googlebot"},r=n.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||n.default.getFirstMatch(a,e);return r&&(t.version=r),t}},{test:[/opera/i],describe:function(e){var t={name:"Opera"},r=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe:function(e){var t={name:"Opera"},r=n.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||n.default.getFirstMatch(a,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe:function(e){var t={name:"Samsung Internet for Android"},r=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe:function(e){var t={name:"NAVER Whale Browser"},r=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe:function(e){var t={name:"MZ Browser"},r=n.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(a,e);return r&&(t.version=r),t}},{test:[/focus/i],describe:function(e){var t={name:"Focus"},r=n.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(a,e);return r&&(t.version=r),t}},{test:[/swing/i],describe:function(e){var t={name:"Swing"},r=n.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||n.default.getFirstMatch(a,e);return r&&(t.version=r),t}},{test:[/coast/i],describe:function(e){var t={name:"Opera Coast"},r=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(e){var t={name:"Opera Touch"},r=n.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(a,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe:function(e){var t={name:"Yandex Browser"},r=n.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(a,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe:function(e){var t={name:"UC Browser"},r=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe:function(e){var t={name:"Maxthon"},r=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe:function(e){var t={name:"Epiphany"},r=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe:function(e){var t={name:"Puffin"},r=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe:function(e){var t={name:"Sleipnir"},r=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe:function(e){var t={name:"K-Meleon"},r=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe:function(e){var t={name:"WeChat"},r=n.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(a,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe:function(e){var t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=n.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(a,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe:function(e){var t={name:"Internet Explorer"},r=n.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe:function(e){var t={name:"Microsoft Edge"},r=n.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe:function(e){var t={name:"Microsoft Edge"},r=n.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe:function(e){var t={name:"Vivaldi"},r=n.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe:function(e){var t={name:"SeaMonkey"},r=n.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe:function(e){var t={name:"Sailfish"},r=n.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe:function(e){var t={name:"Amazon Silk"},r=n.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe:function(e){var t={name:"PhantomJS"},r=n.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe:function(e){var t={name:"SlimerJS"},r=n.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t={name:"BlackBerry"},r=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t={name:"WebOS Browser"},r=n.default.getFirstMatch(a,e)||n.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe:function(e){var t={name:"Bada"},r=n.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe:function(e){var t={name:"Tizen"},r=n.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(a,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe:function(e){var t={name:"QupZilla"},r=n.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(a,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe:function(e){var t={name:"Firefox"},r=n.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe:function(e){var t={name:"Electron"},r=n.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe:function(e){var t={name:"Miui"},r=n.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe:function(e){var t={name:"Chromium"},r=n.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||n.default.getFirstMatch(a,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe:function(e){var t={name:"Chrome"},r=n.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe:function(e){var t={name:"Google Search"},r=n.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t={name:"Android Browser"},r=n.default.getFirstMatch(a,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe:function(e){var t={name:"PlayStation 4"},r=n.default.getFirstMatch(a,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe:function(e){var t={name:"Safari"},r=n.default.getFirstMatch(a,e);return r&&(t.version=r),t}},{test:[/.*/i],describe:function(e){var t=-1!==e.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:n.default.getFirstMatch(t,e),version:n.default.getSecondMatch(t,e)}}}];t.default=o,e.exports=t.default},93:function(e,t,r){t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},a=r(18),o=[{test:[/Roku\/DVP/],describe:function(e){var t=n.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:a.OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe:function(e){var t=n.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe:function(e){var t=n.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=n.default.getWindowsVersionName(t);return{name:a.OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(e){var t={name:a.OS_MAP.iOS},r=n.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe:function(e){var t=n.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=n.default.getMacOSVersionName(t),i={name:a.OS_MAP.MacOS,version:t};return r&&(i.versionName=r),i}},{test:[/(ipod|iphone|ipad)/i],describe:function(e){var t=n.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:a.OS_MAP.iOS,version:t}}},{test:function(e){var t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe:function(e){var t=n.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=n.default.getAndroidVersionName(t),i={name:a.OS_MAP.Android,version:t};return r&&(i.versionName=r),i}},{test:[/(web|hpw)[o0]s/i],describe:function(e){var t=n.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:a.OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(e){var t=n.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||n.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||n.default.getFirstMatch(/\bbb(\d+)/i,e);return{name:a.OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe:function(e){var t=n.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe:function(e){var t=n.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:function(){return{name:a.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:a.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(e){var t=n.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:a.OS_MAP.PlayStation4,version:t}}}];t.default=o,e.exports=t.default},94:function(e,t,r){t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},a=r(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(e){var t=n.default.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:a.PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(e){var t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe:function(e){var t=n.default.getFirstMatch(/(ipod|iphone)/i,e);return{type:a.PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"blackberry"===e.getBrowserName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(e){return"bada"===e.getBrowserName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"windows phone"===e.getBrowserName()},describe:function(){return{type:a.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(e){var t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:function(){return{type:a.PLATFORMS_MAP.tablet}}},{test:function(e){return"android"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.mobile}}},{test:function(e){return"macos"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(e){return"windows"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(e){return"linux"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.desktop}}},{test:function(e){return"playstation 4"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.tv}}},{test:function(e){return"roku"===e.getOSName(!0)},describe:function(){return{type:a.PLATFORMS_MAP.tv}}}];t.default=o,e.exports=t.default},95:function(e,t,r){t.__esModule=!0,t.default=void 0;var i,n=(i=r(17))&&i.__esModule?i:{default:i},a=r(18),o=[{test:function(e){return"microsoft edge"===e.getBrowserName(!0)},describe:function(e){if(/\sedg\//i.test(e))return{name:a.ENGINE_MAP.Blink};var t=n.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:a.ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe:function(e){var t={name:a.ENGINE_MAP.Trident},r=n.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){return e.test(/presto/i)},describe:function(e){var t={name:a.ENGINE_MAP.Presto},r=n.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:function(e){var t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe:function(e){var t={name:a.ENGINE_MAP.Gecko},r=n.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:a.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(e){var t={name:a.ENGINE_MAP.WebKit},r=n.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];t.default=o,e.exports=t.default}});var r,i=(r=t)&&r.__esModule&&Object.prototype.hasOwnProperty.call(r,"default")?r.default:r,n={};({get exports(){return n},set exports(e){n=e}}).exports=function(){function e(e){function t(e){for(var t=0,n=r.length;t<n;++t)r[t](e);i.push(e)}if("function"!=typeof Promise)throw new Error("Promise implementation not available in this environment.");var r=[],i=[],n=new Promise((function(r,i){e(r,i,t)}));n.progress=function(e){if("function"!=typeof e)throw new Error("cb is not a function.");for(var t=0,a=i.length;t<a;++t)e(i[t]);return r.push(e),n};var a=n.then;return n.then=function(e,t,r){return a.call(n,e,t),void 0!==r&&n.progress(r),n},n}function t(t){if(!(t instanceof ArrayBuffer))throw new TypeError("arrayBuffer is not an instance of ArrayBuffer.");if(!n.Worker)throw new Error("Worker implementation is not available in this environment.");return new e((function(e,n,a){var o=new Worker(i),s=[];o.onerror=function(e){n(e)},o.onmessage=function(t){switch((t=t.data).type){case"log":console[t.data.level]("Worker: "+t.data.msg);break;case"extract":var i=r(t.data);s.push(i),a(i);break;case"complete":o.terminate(),e(s);break;case"error":o.terminate(),n(new Error(t.data.message));break;default:o.terminate(),n(new Error("Unknown message from worker: "+t.type))}},o.postMessage({type:"extract",buffer:t},[t])}))}function r(e){return Object.defineProperties(e,o),e}var i,n=window||this,a=n.URL||n.webkitURL,o={blob:{get:function(){return this._blob||(this._blob=new Blob([this.buffer]))}},getBlobUrl:{value:function(){return this._blobUrl||(this._blobUrl=a.createObjectURL(this.blob))}},readAsString:{value:function(){for(var e=this.buffer,t=e.byteLength,r=1,i=new DataView(e),n=[],a=0;a<t;++a){var o=i.getUint8(a*r,!0);n.push(o)}return this._string=String.fromCharCode.apply(null,n)}},readAsJSON:{value:function(){return JSON.parse(this.readAsString())}}};return i=(window||this).URL.createObjectURL(new Blob(['"use strict";function UntarWorker(){}function decodeUTF8(e){for(var r="",t=0;t<e.length;){var a=e[t++];if(a>127){if(a>191&&a<224){if(t>=e.length)throw"UTF-8 decode: incomplete 2-byte sequence";a=(31&a)<<6|63&e[t]}else if(a>223&&a<240){if(t+1>=e.length)throw"UTF-8 decode: incomplete 3-byte sequence";a=(15&a)<<12|(63&e[t])<<6|63&e[++t]}else{if(!(a>239&&a<248))throw"UTF-8 decode: unknown multibyte start 0x"+a.toString(16)+" at index "+(t-1);if(t+2>=e.length)throw"UTF-8 decode: incomplete 4-byte sequence";a=(7&a)<<18|(63&e[t])<<12|(63&e[++t])<<6|63&e[++t]}++t}if(a<=65535)r+=String.fromCharCode(a);else{if(!(a<=1114111))throw"UTF-8 decode: code point 0x"+a.toString(16)+" exceeds UTF-16 reach";a-=65536,r+=String.fromCharCode(a>>10|55296),r+=String.fromCharCode(1023&a|56320)}}return r}function PaxHeader(e){this._fields=e}function TarFile(){}function UntarStream(e){this._bufferView=new DataView(e),this._position=0}function UntarFileStream(e){this._stream=new UntarStream(e),this._globalPaxHeader=null}if(UntarWorker.prototype={onmessage:function(e){try{if("extract"!==e.data.type)throw new Error("Unknown message type: "+e.data.type);this.untarBuffer(e.data.buffer)}catch(r){this.postError(r)}},postError:function(e){this.postMessage({type:"error",data:{message:e.message}})},postLog:function(e,r){this.postMessage({type:"log",data:{level:e,msg:r}})},untarBuffer:function(e){try{for(var r=new UntarFileStream(e);r.hasNext();){var t=r.next();this.postMessage({type:"extract",data:t},[t.buffer])}this.postMessage({type:"complete"})}catch(a){this.postError(a)}},postMessage:function(e,r){self.postMessage(e,r)}},"undefined"!=typeof self){var worker=new UntarWorker;self.onmessage=function(e){worker.onmessage(e)}}PaxHeader.parse=function(e){for(var r=new Uint8Array(e),t=[];r.length>0;){var a=parseInt(decodeUTF8(r.subarray(0,r.indexOf(32)))),n=decodeUTF8(r.subarray(0,a)),i=n.match(/^\\d+ ([^=]+)=(.*)\\n$/);if(null===i)throw new Error("Invalid PAX header data format.");var s=i[1],o=i[2];0===o.length?o=null:null!==o.match(/^\\d+$/)&&(o=parseInt(o));var f={name:s,value:o};t.push(f),r=r.subarray(a)}return new PaxHeader(t)},PaxHeader.prototype={applyHeader:function(e){this._fields.forEach(function(r){var t=r.name,a=r.value;"path"===t?(t="name",void 0!==e.prefix&&delete e.prefix):"linkpath"===t&&(t="linkname"),null===a?delete e[t]:e[t]=a})}},UntarStream.prototype={readString:function(e){for(var r=1,t=e*r,a=[],n=0;n<e;++n){var i=this._bufferView.getUint8(this.position()+n*r,!0);if(0===i)break;a.push(i)}return this.seek(t),String.fromCharCode.apply(null,a)},readBuffer:function(e){var r;if("function"==typeof ArrayBuffer.prototype.slice)r=this._bufferView.buffer.slice(this.position(),this.position()+e);else{r=new ArrayBuffer(e);var t=new Uint8Array(r),a=new Uint8Array(this._bufferView.buffer,this.position(),e);t.set(a)}return this.seek(e),r},seek:function(e){this._position+=e},peekUint32:function(){return this._bufferView.getUint32(this.position(),!0)},position:function(e){return void 0===e?this._position:void(this._position=e)},size:function(){return this._bufferView.byteLength}},UntarFileStream.prototype={hasNext:function(){return this._stream.position()+4<this._stream.size()&&0!==this._stream.peekUint32()},next:function(){return this._readNextFile()},_readNextFile:function(){var e=this._stream,r=new TarFile,t=!1,a=null,n=e.position(),i=n+512;switch(r.name=e.readString(100),r.mode=e.readString(8),r.uid=parseInt(e.readString(8)),r.gid=parseInt(e.readString(8)),r.size=parseInt(e.readString(12),8),r.mtime=parseInt(e.readString(12),8),r.checksum=parseInt(e.readString(8)),r.type=e.readString(1),r.linkname=e.readString(100),r.ustarFormat=e.readString(6),r.ustarFormat.indexOf("ustar")>-1&&(r.version=e.readString(2),r.uname=e.readString(32),r.gname=e.readString(32),r.devmajor=parseInt(e.readString(8)),r.devminor=parseInt(e.readString(8)),r.namePrefix=e.readString(155),r.namePrefix.length>0&&(r.name=r.namePrefix+"/"+r.name)),e.position(i),r.type){case"0":case"":r.buffer=e.readBuffer(r.size);break;case"1":break;case"2":break;case"3":break;case"4":break;case"5":break;case"6":break;case"7":break;case"g":t=!0,this._globalPaxHeader=PaxHeader.parse(e.readBuffer(r.size));break;case"x":t=!0,a=PaxHeader.parse(e.readBuffer(r.size))}void 0===r.buffer&&(r.buffer=new ArrayBuffer(0));var s=i+r.size;return r.size%512!==0&&(s+=512-r.size%512),e.position(s),t&&(r=this._readNextFile()),null!==this._globalPaxHeader&&this._globalPaxHeader.applyHeader(r),null!==a&&a.applyHeader(r),r}};'])),t}();function a(e){let t=e.length;for(;--t>=0;)e[t]=0}const o=256,s=286,d=30,c=15,u=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),l=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),h=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),f=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),g=new Array(576);a(g);const m=new Array(60);a(m);const p=new Array(512);a(p);const b=new Array(256);a(b);const v=new Array(29);a(v);const w=new Array(d);function _(e,t,r,i,n){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=i,this.max_length=n,this.has_stree=e&&e.length}let y,S,R;function k(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}a(w);const A=e=>e<256?p[e]:p[256+(e>>>7)],M=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},x=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,M(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},E=(e,t,r)=>{x(e,r[2*t],r[2*t+1])},T=(e,t)=>{let r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1},C=(e,t,r)=>{const i=new Array(16);let n,a,o=0;for(n=1;n<=c;n++)o=o+r[n-1]<<1,i[n]=o;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=T(i[t]++,t))}},P=e=>{let t;for(t=0;t<s;t++)e.dyn_ltree[2*t]=0;for(t=0;t<d;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},D=e=>{e.bi_valid>8?M(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},F=(e,t,r,i)=>{const n=2*t,a=2*r;return e[n]<e[a]||e[n]===e[a]&&i[t]<=i[r]},L=(e,t,r)=>{const i=e.heap[r];let n=r<<1;for(;n<=e.heap_len&&(n<e.heap_len&&F(t,e.heap[n+1],e.heap[n],e.depth)&&n++,!F(t,i,e.heap[n],e.depth));)e.heap[r]=e.heap[n],r=n,n<<=1;e.heap[r]=i},O=(e,t,r)=>{let i,n,a,s,d=0;if(0!==e.sym_next)do{i=255&e.pending_buf[e.sym_buf+d++],i+=(255&e.pending_buf[e.sym_buf+d++])<<8,n=e.pending_buf[e.sym_buf+d++],0===i?E(e,n,t):(a=b[n],E(e,a+o+1,t),s=u[a],0!==s&&(n-=v[a],x(e,n,s)),i--,a=A(i),E(e,a,r),s=l[a],0!==s&&(i-=w[a],x(e,i,s)))}while(d<e.sym_next);E(e,256,t)},B=(e,t)=>{const r=t.dyn_tree,i=t.stat_desc.static_tree,n=t.stat_desc.has_stree,a=t.stat_desc.elems;let o,s,d,u=-1;for(e.heap_len=0,e.heap_max=573,o=0;o<a;o++)0!==r[2*o]?(e.heap[++e.heap_len]=u=o,e.depth[o]=0):r[2*o+1]=0;for(;e.heap_len<2;)d=e.heap[++e.heap_len]=u<2?++u:0,r[2*d]=1,e.depth[d]=0,e.opt_len--,n&&(e.static_len-=i[2*d+1]);for(t.max_code=u,o=e.heap_len>>1;o>=1;o--)L(e,r,o);d=a;do{o=e.heap[1],e.heap[1]=e.heap[e.heap_len--],L(e,r,1),s=e.heap[1],e.heap[--e.heap_max]=o,e.heap[--e.heap_max]=s,r[2*d]=r[2*o]+r[2*s],e.depth[d]=(e.depth[o]>=e.depth[s]?e.depth[o]:e.depth[s])+1,r[2*o+1]=r[2*s+1]=d,e.heap[1]=d++,L(e,r,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((e,t)=>{const r=t.dyn_tree,i=t.max_code,n=t.stat_desc.static_tree,a=t.stat_desc.has_stree,o=t.stat_desc.extra_bits,s=t.stat_desc.extra_base,d=t.stat_desc.max_length;let u,l,h,f,g,m,p=0;for(f=0;f<=c;f++)e.bl_count[f]=0;for(r[2*e.heap[e.heap_max]+1]=0,u=e.heap_max+1;u<573;u++)l=e.heap[u],f=r[2*r[2*l+1]+1]+1,f>d&&(f=d,p++),r[2*l+1]=f,l>i||(e.bl_count[f]++,g=0,l>=s&&(g=o[l-s]),m=r[2*l],e.opt_len+=m*(f+g),a&&(e.static_len+=m*(n[2*l+1]+g)));if(0!==p){do{for(f=d-1;0===e.bl_count[f];)f--;e.bl_count[f]--,e.bl_count[f+1]+=2,e.bl_count[d]--,p-=2}while(p>0);for(f=d;0!==f;f--)for(l=e.bl_count[f];0!==l;)h=e.heap[--u],h>i||(r[2*h+1]!==f&&(e.opt_len+=(f-r[2*h+1])*r[2*h],r[2*h+1]=f),l--)}})(e,t),C(r,u,e.bl_count)},U=(e,t,r)=>{let i,n,a=-1,o=t[1],s=0,d=7,c=4;for(0===o&&(d=138,c=3),t[2*(r+1)+1]=65535,i=0;i<=r;i++)n=o,o=t[2*(i+1)+1],++s<d&&n===o||(s<c?e.bl_tree[2*n]+=s:0!==n?(n!==a&&e.bl_tree[2*n]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,a=n,0===o?(d=138,c=3):n===o?(d=6,c=3):(d=7,c=4))},I=(e,t,r)=>{let i,n,a=-1,o=t[1],s=0,d=7,c=4;for(0===o&&(d=138,c=3),i=0;i<=r;i++)if(n=o,o=t[2*(i+1)+1],!(++s<d&&n===o)){if(s<c)do{E(e,n,e.bl_tree)}while(0!=--s);else 0!==n?(n!==a&&(E(e,n,e.bl_tree),s--),E(e,16,e.bl_tree),x(e,s-3,2)):s<=10?(E(e,17,e.bl_tree),x(e,s-3,3)):(E(e,18,e.bl_tree),x(e,s-11,7));s=0,a=n,0===o?(d=138,c=3):n===o?(d=6,c=3):(d=7,c=4)}};let z=!1;const N=(e,t,r,i)=>{x(e,0+(i?1:0),3),D(e),M(e,r),M(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};var W=(e,t,r,i)=>{let n,a,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=4093624447;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<o;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),B(e,e.l_desc),B(e,e.d_desc),s=(e=>{let t;for(U(e,e.dyn_ltree,e.l_desc.max_code),U(e,e.dyn_dtree,e.d_desc.max_code),B(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*f[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),n=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=n&&(n=a)):n=a=r+5,r+4<=n&&-1!==t?N(e,t,r,i):4===e.strategy||a===n?(x(e,2+(i?1:0),3),O(e,g,m)):(x(e,4+(i?1:0),3),((e,t,r,i)=>{let n;for(x(e,t-257,5),x(e,r-1,5),x(e,i-4,4),n=0;n<i;n++)x(e,e.bl_tree[2*f[n]+1],3);I(e,e.dyn_ltree,t-1),I(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),O(e,e.dyn_ltree,e.dyn_dtree)),P(e),i&&D(e)},j={_tr_init:e=>{z||((()=>{let e,t,r,i,n;const a=new Array(16);for(r=0,i=0;i<28;i++)for(v[i]=r,e=0;e<1<<u[i];e++)b[r++]=i;for(b[r-1]=i,n=0,i=0;i<16;i++)for(w[i]=n,e=0;e<1<<l[i];e++)p[n++]=i;for(n>>=7;i<d;i++)for(w[i]=n<<7,e=0;e<1<<l[i]-7;e++)p[256+n++]=i;for(t=0;t<=c;t++)a[t]=0;for(e=0;e<=143;)g[2*e+1]=8,e++,a[8]++;for(;e<=255;)g[2*e+1]=9,e++,a[9]++;for(;e<=279;)g[2*e+1]=7,e++,a[7]++;for(;e<=287;)g[2*e+1]=8,e++,a[8]++;for(C(g,287,a),e=0;e<d;e++)m[2*e+1]=5,m[2*e]=T(e,5);y=new _(g,u,257,s,c),S=new _(m,l,0,d,c),R=new _(new Array(0),h,0,19,7)})(),z=!0),e.l_desc=new k(e.dyn_ltree,y),e.d_desc=new k(e.dyn_dtree,S),e.bl_desc=new k(e.bl_tree,R),e.bi_buf=0,e.bi_valid=0,P(e)},_tr_stored_block:N,_tr_flush_block:W,_tr_tally:(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(b[r]+o+1)]++,e.dyn_dtree[2*A(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{x(e,2,3),E(e,256,g),(e=>{16===e.bi_valid?(M(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}};var G=(e,t,r,i)=>{let n=65535&e|0,a=e>>>16&65535|0,o=0;for(;0!==r;){o=r>2e3?2e3:r,r-=o;do{n=n+t[i++]|0,a=a+n|0}while(--o);n%=65521,a%=65521}return n|a<<16|0};const Z=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var i=0;i<8;i++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t})());var V=(e,t,r,i)=>{const n=Z,a=i+r;e^=-1;for(let r=i;r<a;r++)e=e>>>8^n[255&(e^t[r])];return-1^e},H={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},K={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:q,_tr_stored_block:$,_tr_flush_block:Y,_tr_tally:Q,_tr_align:J}=j,{Z_NO_FLUSH:X,Z_PARTIAL_FLUSH:ee,Z_FULL_FLUSH:te,Z_FINISH:re,Z_BLOCK:ie,Z_OK:ne,Z_STREAM_END:ae,Z_STREAM_ERROR:oe,Z_DATA_ERROR:se,Z_BUF_ERROR:de,Z_DEFAULT_COMPRESSION:ce,Z_FILTERED:ue,Z_HUFFMAN_ONLY:le,Z_RLE:he,Z_FIXED:fe,Z_DEFAULT_STRATEGY:ge,Z_UNKNOWN:me,Z_DEFLATED:pe}=K,be=258,ve=262,we=42,_e=113,ye=666,Se=(e,t)=>(e.msg=H[t],t),Re=e=>2*e-(e>4?9:0),ke=e=>{let t=e.length;for(;--t>=0;)e[t]=0},Ae=e=>{let t,r,i,n=e.w_size;t=e.hash_size,i=t;do{r=e.head[--i],e.head[i]=r>=n?r-n:0}while(--t);t=n,i=t;do{r=e.prev[--i],e.prev[i]=r>=n?r-n:0}while(--t)};let Me=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask;const xe=e=>{const t=e.state;let r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},Ee=(e,t)=>{Y(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,xe(e.strm)},Te=(e,t)=>{e.pending_buf[e.pending++]=t},Ce=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},Pe=(e,t,r,i)=>{let n=e.avail_in;return n>i&&(n=i),0===n?0:(e.avail_in-=n,t.set(e.input.subarray(e.next_in,e.next_in+n),r),1===e.state.wrap?e.adler=G(e.adler,t,n,r):2===e.state.wrap&&(e.adler=V(e.adler,t,n,r)),e.next_in+=n,e.total_in+=n,n)},De=(e,t)=>{let r,i,n=e.max_chain_length,a=e.strstart,o=e.prev_length,s=e.nice_match;const d=e.strstart>e.w_size-ve?e.strstart-(e.w_size-ve):0,c=e.window,u=e.w_mask,l=e.prev,h=e.strstart+be;let f=c[a+o-1],g=c[a+o];e.prev_length>=e.good_match&&(n>>=2),s>e.lookahead&&(s=e.lookahead);do{if(r=t,c[r+o]===g&&c[r+o-1]===f&&c[r]===c[a]&&c[++r]===c[a+1]){a+=2,r++;do{}while(c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&c[++a]===c[++r]&&a<h);if(i=be-(h-a),a=h-be,i>o){if(e.match_start=t,o=i,i>=s)break;f=c[a+o-1],g=c[a+o]}}}while((t=l[t&u])>d&&0!=--n);return o<=e.lookahead?o:e.lookahead},Fe=e=>{const t=e.w_size;let r,i,n;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=t+(t-ve)&&(e.window.set(e.window.subarray(t,t+t-i),0),e.match_start-=t,e.strstart-=t,e.block_start-=t,e.insert>e.strstart&&(e.insert=e.strstart),Ae(e),i+=t),0===e.strm.avail_in)break;if(r=Pe(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,e.lookahead+e.insert>=3)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=Me(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=Me(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<ve&&0!==e.strm.avail_in)},Le=(e,t)=>{let r,i,n,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,o=0,s=e.strm.avail_in;do{if(r=65535,n=e.bi_valid+42>>3,e.strm.avail_out<n)break;if(n=e.strm.avail_out-n,i=e.strstart-e.block_start,r>i+e.strm.avail_in&&(r=i+e.strm.avail_in),r>n&&(r=n),r<a&&(0===r&&t!==re||t===X||r!==i+e.strm.avail_in))break;o=t===re&&r===i+e.strm.avail_in?1:0,$(e,0,0,o),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,xe(e.strm),i&&(i>r&&(i=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,r-=i),r&&(Pe(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===o);return s-=e.strm.avail_in,s&&(s>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=s&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-s,e.strm.next_in),e.strstart),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o?4:t!==X&&t!==re&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(n=e.window_size-e.strstart,e.strm.avail_in>n&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,n+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),n>e.strm.avail_in&&(n=e.strm.avail_in),n&&(Pe(e.strm,e.window,e.strstart,n),e.strstart+=n,e.insert+=n>e.w_size-e.insert?e.w_size-e.insert:n),e.high_water<e.strstart&&(e.high_water=e.strstart),n=e.bi_valid+42>>3,n=e.pending_buf_size-n>65535?65535:e.pending_buf_size-n,a=n>e.w_size?e.w_size:n,i=e.strstart-e.block_start,(i>=a||(i||t===re)&&t!==X&&0===e.strm.avail_in&&i<=n)&&(r=i>n?n:i,o=t===re&&0===e.strm.avail_in&&r===i?1:0,$(e,e.block_start,r,o),e.block_start+=r,xe(e.strm)),o?3:1)},Oe=(e,t)=>{let r,i;for(;;){if(e.lookahead<ve){if(Fe(e),e.lookahead<ve&&t===X)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=Me(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-ve&&(e.match_length=De(e,r)),e.match_length>=3)if(i=Q(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do{e.strstart++,e.ins_h=Me(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=Me(e,e.ins_h,e.window[e.strstart+1]);else i=Q(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(i&&(Ee(e,!1),0===e.strm.avail_out))return 1}return e.insert=e.strstart<2?e.strstart:2,t===re?(Ee(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ee(e,!1),0===e.strm.avail_out)?1:2},Be=(e,t)=>{let r,i,n;for(;;){if(e.lookahead<ve){if(Fe(e),e.lookahead<ve&&t===X)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=Me(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-ve&&(e.match_length=De(e,r),e.match_length<=5&&(e.strategy===ue||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){n=e.strstart+e.lookahead-3,i=Q(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=n&&(e.ins_h=Me(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=2,e.strstart++,i&&(Ee(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if(i=Q(e,0,e.window[e.strstart-1]),i&&Ee(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(i=Q(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===re?(Ee(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ee(e,!1),0===e.strm.avail_out)?1:2};function Ue(e,t,r,i,n){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=i,this.func=n}const Ie=[new Ue(0,0,0,0,Le),new Ue(4,4,8,4,Oe),new Ue(4,5,16,8,Oe),new Ue(4,6,32,32,Oe),new Ue(4,4,16,16,Be),new Ue(8,16,32,32,Be),new Ue(8,16,128,128,Be),new Ue(8,32,128,256,Be),new Ue(32,128,258,1024,Be),new Ue(32,258,258,4096,Be)];function ze(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=pe,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ke(this.dyn_ltree),ke(this.dyn_dtree),ke(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ke(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ke(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Ne=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.status!==we&&57!==t.status&&69!==t.status&&73!==t.status&&91!==t.status&&103!==t.status&&t.status!==_e&&t.status!==ye?1:0},We=e=>{if(Ne(e))return Se(e,oe);e.total_in=e.total_out=0,e.data_type=me;const t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?we:_e,e.adler=2===t.wrap?0:1,t.last_flush=-2,q(t),ne},je=e=>{const t=We(e);var r;return t===ne&&((r=e.state).window_size=2*r.w_size,ke(r.head),r.max_lazy_match=Ie[r.level].max_lazy,r.good_match=Ie[r.level].good_length,r.nice_match=Ie[r.level].nice_length,r.max_chain_length=Ie[r.level].max_chain,r.strstart=0,r.block_start=0,r.lookahead=0,r.insert=0,r.match_length=r.prev_length=2,r.match_available=0,r.ins_h=0),t},Ge=(e,t,r,i,n,a)=>{if(!e)return oe;let o=1;if(t===ce&&(t=6),i<0?(o=0,i=-i):i>15&&(o=2,i-=16),n<1||n>9||r!==pe||i<8||i>15||t<0||t>9||a<0||a>fe||8===i&&1!==o)return Se(e,oe);8===i&&(i=9);const s=new ze;return e.state=s,s.strm=e,s.status=we,s.wrap=o,s.gzhead=null,s.w_bits=i,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=n+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<n+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=3*(s.lit_bufsize-1),s.level=t,s.strategy=a,s.method=r,je(e)};var Ze={deflateInit:(e,t)=>Ge(e,t,pe,15,8,ge),deflateInit2:Ge,deflateReset:je,deflateResetKeep:We,deflateSetHeader:(e,t)=>Ne(e)||2!==e.state.wrap?oe:(e.state.gzhead=t,ne),deflate:(e,t)=>{if(Ne(e)||t>ie||t<0)return e?Se(e,oe):oe;const r=e.state;if(!e.output||0!==e.avail_in&&!e.input||r.status===ye&&t!==re)return Se(e,0===e.avail_out?de:oe);const i=r.last_flush;if(r.last_flush=t,0!==r.pending){if(xe(e),0===e.avail_out)return r.last_flush=-1,ne}else if(0===e.avail_in&&Re(t)<=Re(i)&&t!==re)return Se(e,de);if(r.status===ye&&0!==e.avail_in)return Se(e,de);if(r.status===we&&0===r.wrap&&(r.status=_e),r.status===we){let t=pe+(r.w_bits-8<<4)<<8,i=-1;if(i=r.strategy>=le||r.level<2?0:r.level<6?1:6===r.level?2:3,t|=i<<6,0!==r.strstart&&(t|=32),t+=31-t%31,Ce(r,t),0!==r.strstart&&(Ce(r,e.adler>>>16),Ce(r,65535&e.adler)),e.adler=1,r.status=_e,xe(e),0!==r.pending)return r.last_flush=-1,ne}if(57===r.status)if(e.adler=0,Te(r,31),Te(r,139),Te(r,8),r.gzhead)Te(r,(r.gzhead.text?1:0)+(r.gzhead.hcrc?2:0)+(r.gzhead.extra?4:0)+(r.gzhead.name?8:0)+(r.gzhead.comment?16:0)),Te(r,255&r.gzhead.time),Te(r,r.gzhead.time>>8&255),Te(r,r.gzhead.time>>16&255),Te(r,r.gzhead.time>>24&255),Te(r,9===r.level?2:r.strategy>=le||r.level<2?4:0),Te(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(Te(r,255&r.gzhead.extra.length),Te(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=V(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(Te(r,0),Te(r,0),Te(r,0),Te(r,0),Te(r,0),Te(r,9===r.level?2:r.strategy>=le||r.level<2?4:0),Te(r,3),r.status=_e,xe(e),0!==r.pending)return r.last_flush=-1,ne;if(69===r.status){if(r.gzhead.extra){let t=r.pending,i=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+i>r.pending_buf_size;){let n=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=V(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=n,xe(e),0!==r.pending)return r.last_flush=-1,ne;t=0,i-=n}let n=new Uint8Array(r.gzhead.extra);r.pending_buf.set(n.subarray(r.gzindex,r.gzindex+i),r.pending),r.pending+=i,r.gzhead.hcrc&&r.pending>t&&(e.adler=V(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let t,i=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(e.adler=V(e.adler,r.pending_buf,r.pending-i,i)),xe(e),0!==r.pending)return r.last_flush=-1,ne;i=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,Te(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>i&&(e.adler=V(e.adler,r.pending_buf,r.pending-i,i)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let t,i=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>i&&(e.adler=V(e.adler,r.pending_buf,r.pending-i,i)),xe(e),0!==r.pending)return r.last_flush=-1,ne;i=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,Te(r,t)}while(0!==t);r.gzhead.hcrc&&r.pending>i&&(e.adler=V(e.adler,r.pending_buf,r.pending-i,i))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(xe(e),0!==r.pending))return r.last_flush=-1,ne;Te(r,255&e.adler),Te(r,e.adler>>8&255),e.adler=0}if(r.status=_e,xe(e),0!==r.pending)return r.last_flush=-1,ne}if(0!==e.avail_in||0!==r.lookahead||t!==X&&r.status!==ye){let i=0===r.level?Le(r,t):r.strategy===le?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(Fe(e),0===e.lookahead)){if(t===X)return 1;break}if(e.match_length=0,r=Q(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(Ee(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===re?(Ee(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ee(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===he?((e,t)=>{let r,i,n,a;const o=e.window;for(;;){if(e.lookahead<=be){if(Fe(e),e.lookahead<=be&&t===X)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=e.strstart-1,i=o[n],i===o[++n]&&i===o[++n]&&i===o[++n])){a=e.strstart+be;do{}while(i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&i===o[++n]&&n<a);e.match_length=be-(a-n),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=Q(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=Q(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(Ee(e,!1),0===e.strm.avail_out))return 1}return e.insert=0,t===re?(Ee(e,!0),0===e.strm.avail_out?3:4):e.sym_next&&(Ee(e,!1),0===e.strm.avail_out)?1:2})(r,t):Ie[r.level].func(r,t);if(3!==i&&4!==i||(r.status=ye),1===i||3===i)return 0===e.avail_out&&(r.last_flush=-1),ne;if(2===i&&(t===ee?J(r):t!==ie&&($(r,0,0,!1),t===te&&(ke(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),xe(e),0===e.avail_out))return r.last_flush=-1,ne}return t!==re?ne:r.wrap<=0?ae:(2===r.wrap?(Te(r,255&e.adler),Te(r,e.adler>>8&255),Te(r,e.adler>>16&255),Te(r,e.adler>>24&255),Te(r,255&e.total_in),Te(r,e.total_in>>8&255),Te(r,e.total_in>>16&255),Te(r,e.total_in>>24&255)):(Ce(r,e.adler>>>16),Ce(r,65535&e.adler)),xe(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?ne:ae)},deflateEnd:e=>{if(Ne(e))return oe;const t=e.state.status;return e.state=null,t===_e?Se(e,se):ne},deflateSetDictionary:(e,t)=>{let r=t.length;if(Ne(e))return oe;const i=e.state,n=i.wrap;if(2===n||1===n&&i.status!==we||i.lookahead)return oe;if(1===n&&(e.adler=G(e.adler,t,r,0)),i.wrap=0,r>=i.w_size){0===n&&(ke(i.head),i.strstart=0,i.block_start=0,i.insert=0);let e=new Uint8Array(i.w_size);e.set(t.subarray(r-i.w_size,r),0),t=e,r=i.w_size}const a=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,Fe(i);i.lookahead>=3;){let e=i.strstart,t=i.lookahead-2;do{i.ins_h=Me(i,i.ins_h,i.window[e+3-1]),i.prev[e&i.w_mask]=i.head[i.ins_h],i.head[i.ins_h]=e,e++}while(--t);i.strstart=e,i.lookahead=2,Fe(i)}return i.strstart+=i.lookahead,i.block_start=i.strstart,i.insert=i.lookahead,i.lookahead=0,i.match_length=i.prev_length=2,i.match_available=0,e.next_in=o,e.input=s,e.avail_in=a,i.wrap=n,ne},deflateInfo:"pako deflate (from Nodeca project)"};const Ve=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var He={assign:function(e){const t=Array.prototype.slice.call(arguments,1);for(;t.length;){const r=t.shift();if(r){if("object"!=typeof r)throw new TypeError(r+"must be non-object");for(const t in r)Ve(r,t)&&(e[t]=r[t])}}return e},flattenChunks:e=>{let t=0;for(let r=0,i=e.length;r<i;r++)t+=e[r].length;const r=new Uint8Array(t);for(let t=0,i=0,n=e.length;t<n;t++){let n=e[t];r.set(n,i),i+=n.length}return r}};let Ke=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){Ke=!1}const qe=new Uint8Array(256);for(let e=0;e<256;e++)qe[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;qe[254]=qe[254]=1;var $e={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return(new TextEncoder).encode(e);let t,r,i,n,a,o=e.length,s=0;for(n=0;n<o;n++)r=e.charCodeAt(n),55296==(64512&r)&&n+1<o&&(i=e.charCodeAt(n+1),56320==(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),n++)),s+=r<128?1:r<2048?2:r<65536?3:4;for(t=new Uint8Array(s),a=0,n=0;a<s;n++)r=e.charCodeAt(n),55296==(64512&r)&&n+1<o&&(i=e.charCodeAt(n+1),56320==(64512&i)&&(r=65536+(r-55296<<10)+(i-56320),n++)),r<128?t[a++]=r:r<2048?(t[a++]=192|r>>>6,t[a++]=128|63&r):r<65536?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},buf2string:(e,t)=>{const r=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return(new TextDecoder).decode(e.subarray(0,t));let i,n;const a=new Array(2*r);for(n=0,i=0;i<r;){let t=e[i++];if(t<128){a[n++]=t;continue}let o=qe[t];if(o>4)a[n++]=65533,i+=o-1;else{for(t&=2===o?31:3===o?15:7;o>1&&i<r;)t=t<<6|63&e[i++],o--;o>1?a[n++]=65533:t<65536?a[n++]=t:(t-=65536,a[n++]=55296|t>>10&1023,a[n++]=56320|1023&t)}}return((e,t)=>{if(t<65534&&e.subarray&&Ke)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let i=0;i<t;i++)r+=String.fromCharCode(e[i]);return r})(a,n)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&128==(192&e[r]);)r--;return r<0||0===r?t:r+qe[e[r]]>t?r:t}};var Ye=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const Qe=Object.prototype.toString,{Z_NO_FLUSH:Je,Z_SYNC_FLUSH:Xe,Z_FULL_FLUSH:et,Z_FINISH:tt,Z_OK:rt,Z_STREAM_END:it,Z_DEFAULT_COMPRESSION:nt,Z_DEFAULT_STRATEGY:at,Z_DEFLATED:ot}=K;function st(e){this.options=He.assign({level:nt,method:ot,chunkSize:16384,windowBits:15,memLevel:8,strategy:at},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ye,this.strm.avail_out=0;let r=Ze.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==rt)throw new Error(H[r]);if(t.header&&Ze.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?$e.string2buf(t.dictionary):"[object ArrayBuffer]"===Qe.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,r=Ze.deflateSetDictionary(this.strm,e),r!==rt)throw new Error(H[r]);this._dict_set=!0}}st.prototype.push=function(e,t){const r=this.strm,i=this.options.chunkSize;let n,a;if(this.ended)return!1;for(a=t===~~t?t:!0===t?tt:Je,"string"==typeof e?r.input=$e.string2buf(e):"[object ArrayBuffer]"===Qe.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;)if(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),(a===Xe||a===et)&&r.avail_out<=6)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else{if(n=Ze.deflate(r,a),n===it)return r.next_out>0&&this.onData(r.output.subarray(0,r.next_out)),n=Ze.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===rt;if(0!==r.avail_out){if(a>0&&r.next_out>0)this.onData(r.output.subarray(0,r.next_out)),r.avail_out=0;else if(0===r.avail_in)break}else this.onData(r.output)}return!0},st.prototype.onData=function(e){this.chunks.push(e)},st.prototype.onEnd=function(e){e===rt&&(this.result=He.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};const dt=16209;var ct=function(e,t){let r,i,n,a,o,s,d,c,u,l,h,f,g,m,p,b,v,w,_,y,S,R,k,A;const M=e.state;r=e.next_in,k=e.input,i=r+(e.avail_in-5),n=e.next_out,A=e.output,a=n-(t-e.avail_out),o=n+(e.avail_out-257),s=M.dmax,d=M.wsize,c=M.whave,u=M.wnext,l=M.window,h=M.hold,f=M.bits,g=M.lencode,m=M.distcode,p=(1<<M.lenbits)-1,b=(1<<M.distbits)-1;e:do{f<15&&(h+=k[r++]<<f,f+=8,h+=k[r++]<<f,f+=8),v=g[h&p];t:for(;;){if(w=v>>>24,h>>>=w,f-=w,w=v>>>16&255,0===w)A[n++]=65535&v;else{if(!(16&w)){if(0==(64&w)){v=g[(65535&v)+(h&(1<<w)-1)];continue t}if(32&w){M.mode=16191;break e}e.msg="invalid literal/length code",M.mode=dt;break e}_=65535&v,w&=15,w&&(f<w&&(h+=k[r++]<<f,f+=8),_+=h&(1<<w)-1,h>>>=w,f-=w),f<15&&(h+=k[r++]<<f,f+=8,h+=k[r++]<<f,f+=8),v=m[h&b];r:for(;;){if(w=v>>>24,h>>>=w,f-=w,w=v>>>16&255,!(16&w)){if(0==(64&w)){v=m[(65535&v)+(h&(1<<w)-1)];continue r}e.msg="invalid distance code",M.mode=dt;break e}if(y=65535&v,w&=15,f<w&&(h+=k[r++]<<f,f+=8,f<w&&(h+=k[r++]<<f,f+=8)),y+=h&(1<<w)-1,y>s){e.msg="invalid distance too far back",M.mode=dt;break e}if(h>>>=w,f-=w,w=n-a,y>w){if(w=y-w,w>c&&M.sane){e.msg="invalid distance too far back",M.mode=dt;break e}if(S=0,R=l,0===u){if(S+=d-w,w<_){_-=w;do{A[n++]=l[S++]}while(--w);S=n-y,R=A}}else if(u<w){if(S+=d+u-w,w-=u,w<_){_-=w;do{A[n++]=l[S++]}while(--w);if(S=0,u<_){w=u,_-=w;do{A[n++]=l[S++]}while(--w);S=n-y,R=A}}}else if(S+=u-w,w<_){_-=w;do{A[n++]=l[S++]}while(--w);S=n-y,R=A}for(;_>2;)A[n++]=R[S++],A[n++]=R[S++],A[n++]=R[S++],_-=3;_&&(A[n++]=R[S++],_>1&&(A[n++]=R[S++]))}else{S=n-y;do{A[n++]=A[S++],A[n++]=A[S++],A[n++]=A[S++],_-=3}while(_>2);_&&(A[n++]=A[S++],_>1&&(A[n++]=A[S++]))}break}}break}}while(r<i&&n<o);_=f>>3,r-=_,f-=_<<3,h&=(1<<f)-1,e.next_in=r,e.next_out=n,e.avail_in=r<i?i-r+5:5-(r-i),e.avail_out=n<o?o-n+257:257-(n-o),M.hold=h,M.bits=f};const ut=15,lt=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ht=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),ft=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),gt=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var mt=(e,t,r,i,n,a,o,s)=>{const d=s.bits;let c,u,l,h,f,g,m=0,p=0,b=0,v=0,w=0,_=0,y=0,S=0,R=0,k=0,A=null;const M=new Uint16Array(16),x=new Uint16Array(16);let E,T,C,P=null;for(m=0;m<=ut;m++)M[m]=0;for(p=0;p<i;p++)M[t[r+p]]++;for(w=d,v=ut;v>=1&&0===M[v];v--);if(w>v&&(w=v),0===v)return n[a++]=20971520,n[a++]=20971520,s.bits=1,0;for(b=1;b<v&&0===M[b];b++);for(w<b&&(w=b),S=1,m=1;m<=ut;m++)if(S<<=1,S-=M[m],S<0)return-1;if(S>0&&(0===e||1!==v))return-1;for(x[1]=0,m=1;m<ut;m++)x[m+1]=x[m]+M[m];for(p=0;p<i;p++)0!==t[r+p]&&(o[x[t[r+p]]++]=p);if(0===e?(A=P=o,g=20):1===e?(A=lt,P=ht,g=257):(A=ft,P=gt,g=0),k=0,p=0,m=b,f=a,_=w,y=0,l=-1,R=1<<w,h=R-1,1===e&&R>852||2===e&&R>592)return 1;for(;;){E=m-y,o[p]+1<g?(T=0,C=o[p]):o[p]>=g?(T=P[o[p]-g],C=A[o[p]-g]):(T=96,C=0),c=1<<m-y,u=1<<_,b=u;do{u-=c,n[f+(k>>y)+u]=E<<24|T<<16|C|0}while(0!==u);for(c=1<<m-1;k&c;)c>>=1;if(0!==c?(k&=c-1,k+=c):k=0,p++,0==--M[m]){if(m===v)break;m=t[r+o[p]]}if(m>w&&(k&h)!==l){for(0===y&&(y=w),f+=b,_=m-y,S=1<<_;_+y<v&&(S-=M[_+y],!(S<=0));)_++,S<<=1;if(R+=1<<_,1===e&&R>852||2===e&&R>592)return 1;l=k&h,n[l]=w<<24|_<<16|f-a|0}}return 0!==k&&(n[f+k]=m-y<<24|64<<16|0),s.bits=w,0};const{Z_FINISH:pt,Z_BLOCK:bt,Z_TREES:vt,Z_OK:wt,Z_STREAM_END:_t,Z_NEED_DICT:yt,Z_STREAM_ERROR:St,Z_DATA_ERROR:Rt,Z_MEM_ERROR:kt,Z_BUF_ERROR:At,Z_DEFLATED:Mt}=K,xt=16180,Et=16190,Tt=16191,Ct=16192,Pt=16194,Dt=16199,Ft=16200,Lt=16206,Ot=16209,Bt=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function Ut(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const It=e=>{if(!e)return 1;const t=e.state;return!t||t.strm!==e||t.mode<xt||t.mode>16211?1:0},zt=e=>{if(It(e))return St;const t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=xt,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,wt},Nt=e=>{if(It(e))return St;const t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,zt(e)},Wt=(e,t)=>{let r;if(It(e))return St;const i=e.state;return t<0?(r=0,t=-t):(r=5+(t>>4),t<48&&(t&=15)),t&&(t<8||t>15)?St:(null!==i.window&&i.wbits!==t&&(i.window=null),i.wrap=r,i.wbits=t,Nt(e))},jt=(e,t)=>{if(!e)return St;const r=new Ut;e.state=r,r.strm=e,r.window=null,r.mode=xt;const i=Wt(e,t);return i!==wt&&(e.state=null),i};let Gt,Zt,Vt=!0;const Ht=e=>{if(Vt){Gt=new Int32Array(512),Zt=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(mt(1,e.lens,0,288,Gt,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;mt(2,e.lens,0,32,Zt,0,e.work,{bits:5}),Vt=!1}e.lencode=Gt,e.lenbits=9,e.distcode=Zt,e.distbits=5},Kt=(e,t,r,i)=>{let n;const a=e.state;return null===a.window&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(t.subarray(r-a.wsize,r),0),a.wnext=0,a.whave=a.wsize):(n=a.wsize-a.wnext,n>i&&(n=i),a.window.set(t.subarray(r-i,r-i+n),a.wnext),(i-=n)?(a.window.set(t.subarray(r-i,r),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=n,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=n))),0};var qt={inflateReset:Nt,inflateReset2:Wt,inflateResetKeep:zt,inflateInit:e=>jt(e,15),inflateInit2:jt,inflate:(e,t)=>{let r,i,n,a,o,s,d,c,u,l,h,f,g,m,p,b,v,w,_,y,S,R,k=0;const A=new Uint8Array(4);let M,x;const E=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(It(e)||!e.output||!e.input&&0!==e.avail_in)return St;r=e.state,r.mode===Tt&&(r.mode=Ct),o=e.next_out,n=e.output,d=e.avail_out,a=e.next_in,i=e.input,s=e.avail_in,c=r.hold,u=r.bits,l=s,h=d,R=wt;e:for(;;)switch(r.mode){case xt:if(0===r.wrap){r.mode=Ct;break}for(;u<16;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}if(2&r.wrap&&35615===c){0===r.wbits&&(r.wbits=15),r.check=0,A[0]=255&c,A[1]=c>>>8&255,r.check=V(r.check,A,2,0),c=0,u=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=Ot;break}if((15&c)!==Mt){e.msg="unknown compression method",r.mode=Ot;break}if(c>>>=4,u-=4,S=8+(15&c),0===r.wbits&&(r.wbits=S),S>15||S>r.wbits){e.msg="invalid window size",r.mode=Ot;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&c?16189:Tt,c=0,u=0;break;case 16181:for(;u<16;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}if(r.flags=c,(255&r.flags)!==Mt){e.msg="unknown compression method",r.mode=Ot;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=Ot;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&4&r.wrap&&(A[0]=255&c,A[1]=c>>>8&255,r.check=V(r.check,A,2,0)),c=0,u=0,r.mode=16182;case 16182:for(;u<32;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}r.head&&(r.head.time=c),512&r.flags&&4&r.wrap&&(A[0]=255&c,A[1]=c>>>8&255,A[2]=c>>>16&255,A[3]=c>>>24&255,r.check=V(r.check,A,4,0)),c=0,u=0,r.mode=16183;case 16183:for(;u<16;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&4&r.wrap&&(A[0]=255&c,A[1]=c>>>8&255,r.check=V(r.check,A,2,0)),c=0,u=0,r.mode=16184;case 16184:if(1024&r.flags){for(;u<16;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&4&r.wrap&&(A[0]=255&c,A[1]=c>>>8&255,r.check=V(r.check,A,2,0)),c=0,u=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&(f=r.length,f>s&&(f=s),f&&(r.head&&(S=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(i.subarray(a,a+f),S)),512&r.flags&&4&r.wrap&&(r.check=V(r.check,i,f,a)),s-=f,a+=f,r.length-=f),r.length))break e;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===s)break e;f=0;do{S=i[a+f++],r.head&&S&&r.length<65536&&(r.head.name+=String.fromCharCode(S))}while(S&&f<s);if(512&r.flags&&4&r.wrap&&(r.check=V(r.check,i,f,a)),s-=f,a+=f,S)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===s)break e;f=0;do{S=i[a+f++],r.head&&S&&r.length<65536&&(r.head.comment+=String.fromCharCode(S))}while(S&&f<s);if(512&r.flags&&4&r.wrap&&(r.check=V(r.check,i,f,a)),s-=f,a+=f,S)break e}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;u<16;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}if(4&r.wrap&&c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=Ot;break}c=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=Tt;break;case 16189:for(;u<32;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}e.adler=r.check=Bt(c),c=0,u=0,r.mode=Et;case Et:if(0===r.havedict)return e.next_out=o,e.avail_out=d,e.next_in=a,e.avail_in=s,r.hold=c,r.bits=u,yt;e.adler=r.check=1,r.mode=Tt;case Tt:if(t===bt||t===vt)break e;case Ct:if(r.last){c>>>=7&u,u-=7&u,r.mode=Lt;break}for(;u<3;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}switch(r.last=1&c,c>>>=1,u-=1,3&c){case 0:r.mode=16193;break;case 1:if(Ht(r),r.mode=Dt,t===vt){c>>>=2,u-=2;break e}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=Ot}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=Ot;break}if(r.length=65535&c,c=0,u=0,r.mode=Pt,t===vt)break e;case Pt:r.mode=16195;case 16195:if(f=r.length,f){if(f>s&&(f=s),f>d&&(f=d),0===f)break e;n.set(i.subarray(a,a+f),o),s-=f,a+=f,d-=f,o+=f,r.length-=f;break}r.mode=Tt;break;case 16196:for(;u<14;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}if(r.nlen=257+(31&c),c>>>=5,u-=5,r.ndist=1+(31&c),c>>>=5,u-=5,r.ncode=4+(15&c),c>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=Ot;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;u<3;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}r.lens[E[r.have++]]=7&c,c>>>=3,u-=3}for(;r.have<19;)r.lens[E[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,M={bits:r.lenbits},R=mt(0,r.lens,0,19,r.lencode,0,r.work,M),r.lenbits=M.bits,R){e.msg="invalid code lengths set",r.mode=Ot;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;k=r.lencode[c&(1<<r.lenbits)-1],p=k>>>24,b=k>>>16&255,v=65535&k,!(p<=u);){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}if(v<16)c>>>=p,u-=p,r.lens[r.have++]=v;else{if(16===v){for(x=p+2;u<x;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}if(c>>>=p,u-=p,0===r.have){e.msg="invalid bit length repeat",r.mode=Ot;break}S=r.lens[r.have-1],f=3+(3&c),c>>>=2,u-=2}else if(17===v){for(x=p+3;u<x;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}c>>>=p,u-=p,S=0,f=3+(7&c),c>>>=3,u-=3}else{for(x=p+7;u<x;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}c>>>=p,u-=p,S=0,f=11+(127&c),c>>>=7,u-=7}if(r.have+f>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=Ot;break}for(;f--;)r.lens[r.have++]=S}}if(r.mode===Ot)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=Ot;break}if(r.lenbits=9,M={bits:r.lenbits},R=mt(1,r.lens,0,r.nlen,r.lencode,0,r.work,M),r.lenbits=M.bits,R){e.msg="invalid literal/lengths set",r.mode=Ot;break}if(r.distbits=6,r.distcode=r.distdyn,M={bits:r.distbits},R=mt(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,M),r.distbits=M.bits,R){e.msg="invalid distances set",r.mode=Ot;break}if(r.mode=Dt,t===vt)break e;case Dt:r.mode=Ft;case Ft:if(s>=6&&d>=258){e.next_out=o,e.avail_out=d,e.next_in=a,e.avail_in=s,r.hold=c,r.bits=u,ct(e,h),o=e.next_out,n=e.output,d=e.avail_out,a=e.next_in,i=e.input,s=e.avail_in,c=r.hold,u=r.bits,r.mode===Tt&&(r.back=-1);break}for(r.back=0;k=r.lencode[c&(1<<r.lenbits)-1],p=k>>>24,b=k>>>16&255,v=65535&k,!(p<=u);){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}if(b&&0==(240&b)){for(w=p,_=b,y=v;k=r.lencode[y+((c&(1<<w+_)-1)>>w)],p=k>>>24,b=k>>>16&255,v=65535&k,!(w+p<=u);){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}c>>>=w,u-=w,r.back+=w}if(c>>>=p,u-=p,r.back+=p,r.length=v,0===b){r.mode=16205;break}if(32&b){r.back=-1,r.mode=Tt;break}if(64&b){e.msg="invalid literal/length code",r.mode=Ot;break}r.extra=15&b,r.mode=16201;case 16201:if(r.extra){for(x=r.extra;u<x;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;k=r.distcode[c&(1<<r.distbits)-1],p=k>>>24,b=k>>>16&255,v=65535&k,!(p<=u);){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}if(0==(240&b)){for(w=p,_=b,y=v;k=r.distcode[y+((c&(1<<w+_)-1)>>w)],p=k>>>24,b=k>>>16&255,v=65535&k,!(w+p<=u);){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}c>>>=w,u-=w,r.back+=w}if(c>>>=p,u-=p,r.back+=p,64&b){e.msg="invalid distance code",r.mode=Ot;break}r.offset=v,r.extra=15&b,r.mode=16203;case 16203:if(r.extra){for(x=r.extra;u<x;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=Ot;break}r.mode=16204;case 16204:if(0===d)break e;if(f=h-d,r.offset>f){if(f=r.offset-f,f>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=Ot;break}f>r.wnext?(f-=r.wnext,g=r.wsize-f):g=r.wnext-f,f>r.length&&(f=r.length),m=r.window}else m=n,g=o-r.offset,f=r.length;f>d&&(f=d),d-=f,r.length-=f;do{n[o++]=m[g++]}while(--f);0===r.length&&(r.mode=Ft);break;case 16205:if(0===d)break e;n[o++]=r.length,d--,r.mode=Ft;break;case Lt:if(r.wrap){for(;u<32;){if(0===s)break e;s--,c|=i[a++]<<u,u+=8}if(h-=d,e.total_out+=h,r.total+=h,4&r.wrap&&h&&(e.adler=r.check=r.flags?V(r.check,n,h,o-h):G(r.check,n,h,o-h)),h=d,4&r.wrap&&(r.flags?c:Bt(c))!==r.check){e.msg="incorrect data check",r.mode=Ot;break}c=0,u=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;u<32;){if(0===s)break e;s--,c+=i[a++]<<u,u+=8}if(4&r.wrap&&c!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=Ot;break}c=0,u=0}r.mode=16208;case 16208:R=_t;break e;case Ot:R=Rt;break e;case 16210:return kt;default:return St}return e.next_out=o,e.avail_out=d,e.next_in=a,e.avail_in=s,r.hold=c,r.bits=u,(r.wsize||h!==e.avail_out&&r.mode<Ot&&(r.mode<Lt||t!==pt))&&Kt(e,e.output,e.next_out,h-e.avail_out),l-=e.avail_in,h-=e.avail_out,e.total_in+=l,e.total_out+=h,r.total+=h,4&r.wrap&&h&&(e.adler=r.check=r.flags?V(r.check,n,h,e.next_out-h):G(r.check,n,h,e.next_out-h)),e.data_type=r.bits+(r.last?64:0)+(r.mode===Tt?128:0)+(r.mode===Dt||r.mode===Pt?256:0),(0===l&&0===h||t===pt)&&R===wt&&(R=At),R},inflateEnd:e=>{if(It(e))return St;let t=e.state;return t.window&&(t.window=null),e.state=null,wt},inflateGetHeader:(e,t)=>{if(It(e))return St;const r=e.state;return 0==(2&r.wrap)?St:(r.head=t,t.done=!1,wt)},inflateSetDictionary:(e,t)=>{const r=t.length;let i,n,a;return It(e)?St:(i=e.state,0!==i.wrap&&i.mode!==Et?St:i.mode===Et&&(n=1,n=G(n,t,r,0),n!==i.check)?Rt:(a=Kt(e,t,r,r),a?(i.mode=16210,kt):(i.havedict=1,wt)))},inflateInfo:"pako inflate (from Nodeca project)"};var $t=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Yt=Object.prototype.toString,{Z_NO_FLUSH:Qt,Z_FINISH:Jt,Z_OK:Xt,Z_STREAM_END:er,Z_NEED_DICT:tr,Z_STREAM_ERROR:rr,Z_DATA_ERROR:ir,Z_MEM_ERROR:nr}=K;function ar(e){this.options=He.assign({chunkSize:65536,windowBits:15,to:""},e||{});const t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Ye,this.strm.avail_out=0;let r=qt.inflateInit2(this.strm,t.windowBits);if(r!==Xt)throw new Error(H[r]);if(this.header=new $t,qt.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=$e.string2buf(t.dictionary):"[object ArrayBuffer]"===Yt.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw&&(r=qt.inflateSetDictionary(this.strm,t.dictionary),r!==Xt)))throw new Error(H[r])}function or(e,t){const r=new ar(t);if(r.push(e),r.err)throw r.msg||H[r.err];return r.result}ar.prototype.push=function(e,t){const r=this.strm,i=this.options.chunkSize,n=this.options.dictionary;let a,o,s;if(this.ended)return!1;for(o=t===~~t?t:!0===t?Jt:Qt,"[object ArrayBuffer]"===Yt.call(e)?r.input=new Uint8Array(e):r.input=e,r.next_in=0,r.avail_in=r.input.length;;){for(0===r.avail_out&&(r.output=new Uint8Array(i),r.next_out=0,r.avail_out=i),a=qt.inflate(r,o),a===tr&&n&&(a=qt.inflateSetDictionary(r,n),a===Xt?a=qt.inflate(r,o):a===ir&&(a=tr));r.avail_in>0&&a===er&&r.state.wrap>0&&0!==e[r.next_in];)qt.inflateReset(r),a=qt.inflate(r,o);switch(a){case rr:case ir:case tr:case nr:return this.onEnd(a),this.ended=!0,!1}if(s=r.avail_out,r.next_out&&(0===r.avail_out||a===er))if("string"===this.options.to){let e=$e.utf8border(r.output,r.next_out),t=r.next_out-e,n=$e.buf2string(r.output,e);r.next_out=t,r.avail_out=i-t,t&&r.output.set(r.output.subarray(e,e+t),0),this.onData(n)}else this.onData(r.output.length===r.next_out?r.output:r.output.subarray(0,r.next_out));if(a!==Xt||0!==s){if(a===er)return a=qt.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(0===r.avail_in)break}}return!0},ar.prototype.onData=function(e){this.chunks.push(e)},ar.prototype.onEnd=function(e){e===Xt&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=He.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var sr={Inflate:ar,inflate:or,inflateRaw:function(e,t){return(t=t||{}).raw=!0,or(e,t)},ungzip:or,constants:K};const{Inflate:dr,inflate:cr,inflateRaw:ur,ungzip:lr}=sr;var hr=cr;var fr;!function(e){e[e.IMPORTED=0]="IMPORTED",e[e.PREPARED=1]="PREPARED",e[e.INITIALIZED=2]="INITIALIZED"}(fr||(fr={}));class gr{static DATA_DIR="/keenasr";static BUNDLES_DIR=gr.DATA_DIR+"/asr_bundles";static DIR_SEP="/";static DECODING_GRAPH_DIR=gr.DATA_DIR+"/keenasr-decoding-graphs";static DECODING_GRAPH_TMP_DIR=gr.DATA_DIR+"/tmp";state=fr.IMPORTED;core;RecognizerState;SpeakingTask;VADParameter;LogLevel;version(){return"0.4.0"}getVersionHash(){return"c49a5de362510a83d123448cfa7d9ce3ee2efd5e"}async prepare(){if(this.state>fr.IMPORTED)return console.log("KeenASR: Already prepared"),!0;this.prepareLock(),console.log(`KeenASR Web SDK Version: ${this.version()} - built on June 22, 2023 18:17:24`);try{await this.importCore(),this.RecognizerState=this.core?.RecognizerState,this.SpeakingTask=this.core?.SpeakingTask,this.VADParameter=this.core?.VADParameter,this.LogLevel=this.core?.LogLevel}catch(e){throw e?.cause?.isIsolatedContextError?e:Error(`Failed to retrieve KeenASR wasm core : ${e?.message??e??""}`)}try{await this.initFS()}catch(e){throw Error(`Failed to initialize virtual file system: ${e?.message??e??""}`)}return globalThis.KeenASR=this,this.state=fr.PREPARED,!0}async prepareLock(){return!0}async initialize(e){if(this.state!==fr.PREPARED)return console.log("KeenASR: Only call initialize() after prepare()"),!0;const t=gr.BUNDLES_DIR+gr.DIR_SEP+e;return new Promise((async(r,i)=>{await this.platformInitialize(e,t),await this.checkASRDirsExist(t),this.setOnInitializeHandler((e=>{console.log("Module Initialized"),this.state=fr.INITIALIZED,e?r(e):i("KeenASR: SDK Failed to Initialize")}));try{this.core?.initializeModule(t)}catch{i("KeenASR: Call to Initialize failed.")}}))}async checkASRDirsExist(e){return new Promise(((t,r)=>{try{this.core?.FS.readdir(gr.DECODING_GRAPH_DIR+gr.DIR_SEP),this.core?.FS.readdir(gr.BUNDLES_DIR+gr.DIR_SEP);this.core?.FS.readdir(e);t(!0)}catch(i){i.errno===this.core?.ERRNO_CODES.EEXIST?(console.log(`${e} already exists`),t(!0)):r(`Error reading files in directory: ${e} : ${i?.message??i??"error type unknown"}`)}}))}setOnInitializeHandler(e){(this.core.PThread?.runningWorkers.length>0?this.core.PThread.runningWorkers:this.core.PThread.unusedWorkers).forEach((t=>{try{this.listenToWorker(t,"message",(function(t){const r=t?.data??t;if("KeenASR::Initialize::Success"===r?.keenasr?.cmd)try{let t=r?.keenasr?.initialized;if(!t)throw new Error("Failed to parse Initialize Event");console.log(`KeenASR SDK ${t?"":"Not "}Initialized`),e&&e(t)}catch(e){console.log(e)}})),this.listenToWorker(t,"error",(t=>{e(!1)}))}catch(e){console.log("Failed to subscribe to worker message for Initialize",e)}}))}setOnDecodingGraphCreatedHandler(e){(this.core.PThread.runningWorkers.length>0?this.core.PThread.runningWorkers:this.core.PThread.unusedWorkers).forEach((t=>{try{this.listenToWorker(t,"message",(t=>{const r=t?.data??t;if("KeenASR::DecodingGraph::Created"===r?.keenasr?.cmd)try{let t=1===r?.keenasr?.success;if(!t)throw new Error("Failed to parse Create Decoding Graph Event");this.syncFS(!1,"Syncing filesystem"),console.log(`Decoding Graph ${t?"":"Not "}Created`),e&&e(t)}catch(e){console.log(e)}})),this.listenToWorker(t,"error",(t=>{e(!1)}))}catch(e){console.log("Failed to subscribe to worker message for DecodingGraphCreated",e)}}))}setResultHandlers(e,t,r){let i=this;this.core.PThread.runningWorkers.forEach((n=>{try{this.listenToWorker(n,"message",(function(n){const a=n?.data??n;if("KeenASR::PartialResult"===a?.keenasr?.cmd)try{const t=i.core.ASRResult.getLastPartialResult();e&&e(t)}catch(e){console.log(e),i.onPartialResultPlatformError()}if("KeenASR::FinalResult"===a?.keenasr?.cmd)try{let e=a?.keenasr?.result??"Failed to parse ASRResult Event";const n=new i.core.ASRResult(e);t&&t(n),i.onFinalResultPlatform(r)}catch(e){console.log(e),i.onFinalResultPlatformError()}}))}catch(e){console.log("Failed to subscribe to worker message for Results",e)}}))}onPartialResultPlatform=()=>{};onFinalResultPlatform=e=>{};onPartialResultPlatformError=()=>{};onFinalResultPlatformError=()=>{};prepareForListeningWithCustomDecodingGraphWithName(e){return this.core.prepareForListeningWithCustomDecodingGraphWithName(e)}prepareForListeningWithContextualDecodingGraphWithNameAndContextId(e,t){return this.core.prepareForListeningWithCustomDecodingGraphWithNameAndContextId(e,t)}stopListeningAndReturnFinalResult(){this.core?.stopListeningAndReturnFinalResult()}getRecognizerState(){if(this.state<fr.INITIALIZED)throw Error("KeenASR: SDK is not initialized.");return this.core.getRecognizerState().value}adaptToSpeakerWithName(e){}resetSpeakerAdaptation(){}saveSpeakerAdaptationProfile(){}removeAllSpeakerAdaptationProfiles(){return!1}removeSpeakerAdaptationProfiles(e){return!1}getLastJSONMetadataFilename(){return""}setVADParameter(e,t){this.core?.setVADParameter(e,t)}convertPronToSDKValidPron(e){const t=e.split(" ").filter((e=>!!e));if(!t.length)throw new Error("Invalid pronuncation");if(1===t.length)return`${t[0]}_S`;let r="";for(let e=0;e<t.length;e++)0===e?r+=`${t[e]}_B\t`:e===t.length-1?r+=`${t[e]}_E`:r+=`${t[e]}_I\t`;return r}setLogLevel(e){this.core?.setLogLevel(e)}createDecodingGraphFromPhrases(e,t,r,i){let n=new this.core.VectorString;e.forEach((function(e){n.push_back(e)}));let a=new this.core.VectorAlternativePronunciation;return t.forEach((e=>a.push_back({...e,pronunciation:this.convertPronToSDKValidPron(e.pronunciation)}))),console.log("Creating decoding graph from phrases"),new Promise(((e,t)=>{this.setOnDecodingGraphCreatedHandler((r=>r?e(r):t("KeenASR: SDK Failed to Create Decoding Graph")));try{this.core?.createDecodingGraphFromPhrases(n,a,r,i)}catch{t("KeenASR: Call to CreateDecodingGraphFromPhrases failed.")}}))}createContextualDecodingGraphFromPhrases(e,t,r){let i=new this.core.VectorVectorString;return e.forEach((e=>{let t=new this.core.VectorString;e.forEach((function(e){t.push_back(e)})),i.push_back(t)})),new Promise(((e,n)=>{this.setOnDecodingGraphCreatedHandler((t=>t?e(t):n("KeenASR: SDK Failed to Create Decoding Graph")));try{this.core?.createContextualDecodingGraphFromPhrases(i,t,r)}catch{n("KeenASR: Call to CreateDecodingGraphFromPhrases failed.")}}))}decodingGraphWithNameExists(e){return this.core.decodingGraphWithNameExists(e)}async isASRBundleAvailable(e){if(this.state<fr.PREPARED)throw Error("KeenASR: Must call prepare() first.");const t=gr.BUNDLES_DIR+gr.DIR_SEP+e;try{await(this.core?.FS.stat(t));return!0}catch(e){return!1}}async fetchASRBundle(e){if(this.state<fr.PREPARED)throw Error("KeenASR: Must call prepare() first.");return this.fetchASRBundlePlatform(e)}async fetchASRBundlePlatform(e){return!0}getASRBundleName(){return""}setCreateJSONMetadata(e){}setCreateAudioRecordings(e){}setCreateJSONMetadsetEchoCancellationData(e){return!1}async initFS(){return await this.makeDir(gr.DATA_DIR),await this.mountDir(gr.DATA_DIR),new Promise(((e,t)=>{this.core.FS.syncfs(!0,(async t=>{if(t)throw Error("Error sync'ing FS",t);console.log("FS synchronized persisted post-mount initFS"),await this.makeDir(gr.BUNDLES_DIR),await this.makeDir(gr.DECODING_GRAPH_DIR),await this.makeDir(gr.DECODING_GRAPH_TMP_DIR),e(!0)}))}))}async mountDir(e){try{await this.mountAtRoot(e),await this.syncFS(!0,"post-mount mountDir")}catch(t){if(t.errno!==this.core?.ERRNO_CODES.EBUSY)throw new Error(`Failed to mount ${e} - ${t.message??t}`);console.log(`${e} already mounted by ${import.meta.url}, are you running initFS twice?`)}}async makeDir(e){try{await(this.core?.FS.mkdir(e))}catch(e){if(e.errno!==this.core?.ERRNO_CODES.EEXIST)throw new Error(e.message)}}async syncFS(e=!0,t=""){return await new Promise(((t,r)=>{this.core?.FS.syncfs(e,(e=>{e&&(console.log("Error sync'ing FS",e),r()),t(!0)}))}))}alignTexts(e,t,r,i){const n=new this.core.VectorString,a=new this.core.VectorString;e.forEach((e=>n.push_back(e))),t.forEach((e=>a.push_back(e)));const o=this.core.alignTexts(n,a,r,i),s=[],d=[];for(let e=0;e<o.aligned_ref.size();e++)s.push(o.aligned_ref.get(e));for(let e=0;e<o.aligned_hyp.size();e++)d.push(o.aligned_hyp.get(e));return{alignedRef:s,alignedHyp:d}}}var mr;!function(e){e[e.None=0]="None",e[e.InProgress=1]="InProgress",e[e.ProcessingStopped=2]="ProcessingStopped",e[e.ProcessingCompleted=3]="ProcessingCompleted"}(mr||(mr={}));class pr{onAudioProcessInit;onAudioProcess;shouldPerformEchoCancellation;createAudioRecordings=!1;recordingFilename;fileProcessingStatus=mr.None;running=!1;activated=!1;sampleRate;bytesPerSample=16;bufferLength;enableBluetoothA2DPOutput=!1;recordingDirectory;recordingTimeCorrection=0;constructor(e,t,r=!1){this.sampleRate=t??16e3,this.bufferLength=e??0,this.shouldPerformEchoCancellation=r}performEchoCancellation(e){this.shouldPerformEchoCancellation=e}clearBuffer(){}inputAveragePowerLevel(e,t){throw new Error("Method not implemented")}}var br={};!function(t){function r(e,t){if(!e)throw"First parameter is required.";t=new i(e,t=t||{type:"video"});var a=this;function o(r){r&&(t.initCallback=function(){r(),r=t.initCallback=null});var i=new n(e,t);(f=new i(e,t)).record(),h("recording"),t.disableLogs||console.log("Initialized recorderType:",f.constructor.name,"for output-type:",t.type)}function s(e){if(e=e||function(){},f){if("paused"===a.state)return a.resumeRecording(),void setTimeout((function(){s(e)}),1);"recording"===a.state||t.disableLogs||console.warn('Recording state should be: "recording", however current state is: ',a.state),t.disableLogs||console.log("Stopped recording "+t.type+" stream."),"gif"!==t.type?f.stop(r):(f.stop(),r()),h("stopped")}else m();function r(r){if(f){Object.keys(f).forEach((function(e){"function"!=typeof f[e]&&(a[e]=f[e])}));var i=f.blob;if(!i){if(!r)throw"Recording failed.";f.blob=i=r}if(i&&!t.disableLogs&&console.log(i.type,"->",v(i.size)),e){var n;try{n=l.createObjectURL(i)}catch(e){}"function"==typeof e.call?e.call(a,n):e(n)}t.autoWriteToDisk&&c((function(e){var r={};r[t.type+"Blob"]=e,C.Store(r)}))}else"function"==typeof e.call?e.call(a,""):e("")}}function d(e){postMessage((new FileReaderSync).readAsDataURL(e))}function c(e,r){if(!e)throw"Pass a callback function over getDataURL.";var i=r?r.blob:(f||{}).blob;if(!i)return t.disableLogs||console.warn("Blob encoder did not finish its job yet."),void setTimeout((function(){c(e,r)}),1e3);if("undefined"==typeof Worker||navigator.mozGetUserMedia){var n=new FileReader;n.readAsDataURL(i),n.onload=function(t){e(t.target.result)}}else{var a=function(e){try{var t=l.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),r=new Worker(t);return l.revokeObjectURL(t),r}catch(e){}}(d);a.onmessage=function(t){e(t.data)},a.postMessage(i)}}function u(e){e=e||0,"paused"!==a.state?"stopped"!==a.state&&(e>=a.recordingDuration?s(a.onRecordingStopped):(e+=1e3,setTimeout((function(){u(e)}),1e3))):setTimeout((function(){u(e)}),1e3)}function h(e){a&&(a.state=e,"function"==typeof a.onStateChanged.call?a.onStateChanged.call(a,e):a.onStateChanged(e))}var f,g='It seems that recorder is destroyed or "startRecording" is not invoked for '+t.type+" recorder.";function m(){!0!==t.disableLogs&&console.warn(g)}var p={startRecording:function(r){return t.disableLogs||console.log("RecordRTC version: ",a.version),r&&(t=new i(e,r)),t.disableLogs||console.log("started recording "+t.type+" stream."),f?(f.clearRecordedData(),f.record(),h("recording"),a.recordingDuration&&u(),a):(o((function(){a.recordingDuration&&u()})),a)},stopRecording:s,pauseRecording:function(){f?"recording"===a.state?(h("paused"),f.pause(),t.disableLogs||console.log("Paused recording.")):t.disableLogs||console.warn("Unable to pause the recording. Recording state: ",a.state):m()},resumeRecording:function(){f?"paused"===a.state?(h("recording"),f.resume(),t.disableLogs||console.log("Resumed recording.")):t.disableLogs||console.warn("Unable to resume the recording. Recording state: ",a.state):m()},initRecorder:o,setRecordingDuration:function(e,t){if(void 0===e)throw"recordingDuration is required.";if("number"!=typeof e)throw"recordingDuration must be a number.";return a.recordingDuration=e,a.onRecordingStopped=t||function(){},{onRecordingStopped:function(e){a.onRecordingStopped=e}}},clearRecordedData:function(){f?(f.clearRecordedData(),t.disableLogs||console.log("Cleared old recorded data.")):m()},getBlob:function(){if(f)return f.blob;m()},getDataURL:c,toURL:function(){if(f)return l.createObjectURL(f.blob);m()},getInternalRecorder:function(){return f},save:function(e){f?w(f.blob,e):m()},getFromDisk:function(e){f?r.getFromDisk(t.type,e):m()},setAdvertisementArray:function(e){t.advertisement=[];for(var r=e.length,i=0;i<r;i++)t.advertisement.push({duration:i,image:e[i]})},blob:null,bufferSize:0,sampleRate:0,buffer:null,reset:function(){"recording"!==a.state||t.disableLogs||console.warn("Stop an active recorder."),f&&"function"==typeof f.clearRecordedData&&f.clearRecordedData(),f=null,h("inactive"),a.blob=null},onStateChanged:function(e){t.disableLogs||console.log("Recorder state changed:",e)},state:"inactive",getState:function(){return a.state},destroy:function(){var e=t.disableLogs;t={disableLogs:!0},a.reset(),h("destroyed"),p=a=null,R.AudioContextConstructor&&(R.AudioContextConstructor.close(),R.AudioContextConstructor=null),t.disableLogs=e,t.disableLogs||console.log("RecordRTC is destroyed.")},version:"5.6.2"};if(!this)return a=p,p;for(var b in p)this[b]=p[b];return a=this,p}function i(e,t){return t.recorderType||t.type||(t.audio&&t.video?t.type="video":t.audio&&!t.video&&(t.type="audio")),t.recorderType&&!t.type&&(t.recorderType===E||t.recorderType===x||void 0!==L&&t.recorderType===L?t.type="video":t.recorderType===P?t.type="gif":t.recorderType===M?t.type="audio":t.recorderType===A&&(y(e,"audio").length&&y(e,"video").length||!y(e,"audio").length&&y(e,"video").length?t.type="video":y(e,"audio").length&&!y(e,"video").length&&(t.type="audio"))),void 0!==A&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(t.mimeType||(t.mimeType="video/webm"),t.type||(t.type=t.mimeType.split("/")[0]),t.bitsPerSecond),t.type||(t.mimeType&&(t.type=t.mimeType.split("/")[0]),t.type||(t.type="audio")),t}function n(e,t){var r;return(m||h||f)&&(r=M),"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&!m&&(r=A),"video"===t.type&&(m||f)&&(r=E,void 0!==L&&"undefined"!=typeof ReadableStream&&(r=L)),"gif"===t.type&&(r=P),"canvas"===t.type&&(r=x),k()&&r!==x&&r!==P&&"undefined"!=typeof MediaRecorder&&"requestData"in MediaRecorder.prototype&&(y(e,"video").length||y(e,"audio").length)&&("audio"===t.type?"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("audio/webm")&&(r=A):"function"==typeof MediaRecorder.isTypeSupported&&MediaRecorder.isTypeSupported("video/webm")&&(r=A)),e instanceof Array&&e.length&&(r=F),t.recorderType&&(r=t.recorderType),!t.disableLogs&&r&&r.name&&console.log("Using recorderType:",r.name||r.constructor.name),!r&&p&&(r=A),r}function a(e){this.addStream=function(t){t&&(e=t)},this.mediaType={audio:!0,video:!0},this.startRecording=function(){var t,i=this.mediaType,n=this.mimeType||{audio:null,video:null,gif:null};if("function"!=typeof i.audio&&k()&&!y(e,"audio").length&&(i.audio=!1),"function"!=typeof i.video&&k()&&!y(e,"video").length&&(i.video=!1),"function"!=typeof i.gif&&k()&&!y(e,"video").length&&(i.gif=!1),!i.audio&&!i.video&&!i.gif)throw"MediaStream must have either audio or video tracks.";if(i.audio&&(t=null,"function"==typeof i.audio&&(t=i.audio),this.audioRecorder=new r(e,{type:"audio",bufferSize:this.bufferSize,sampleRate:this.sampleRate,numberOfAudioChannels:this.numberOfAudioChannels||2,disableLogs:this.disableLogs,recorderType:t,mimeType:n.audio,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp}),i.video||this.audioRecorder.startRecording()),i.video){t=null,"function"==typeof i.video&&(t=i.video);var a=e;if(k()&&i.audio&&"function"==typeof i.audio){var o=y(e,"video")[0];g?((a=new b).addTrack(o),t&&t===E&&(t=A)):(a=new b).addTrack(o)}this.videoRecorder=new r(a,{type:"video",video:this.video,canvas:this.canvas,frameInterval:this.frameInterval||10,disableLogs:this.disableLogs,recorderType:t,mimeType:n.video,timeSlice:this.timeSlice,onTimeStamp:this.onTimeStamp,workerPath:this.workerPath,webAssemblyPath:this.webAssemblyPath,frameRate:this.frameRate,bitrate:this.bitrate}),i.audio||this.videoRecorder.startRecording()}if(i.audio&&i.video){var s=this,d=!0===k();(i.audio instanceof M&&i.video||!0!==i.audio&&!0!==i.video&&i.audio!==i.video)&&(d=!1),!0===d?(s.audioRecorder=null,s.videoRecorder.startRecording()):s.videoRecorder.initRecorder((function(){s.audioRecorder.initRecorder((function(){s.videoRecorder.startRecording(),s.audioRecorder.startRecording()}))}))}i.gif&&(t=null,"function"==typeof i.gif&&(t=i.gif),this.gifRecorder=new r(e,{type:"gif",frameRate:this.frameRate||200,quality:this.quality||10,disableLogs:this.disableLogs,recorderType:t,mimeType:n.gif}),this.gifRecorder.startRecording())},this.stopRecording=function(e){e=e||function(){},this.audioRecorder&&this.audioRecorder.stopRecording((function(t){e(t,"audio")})),this.videoRecorder&&this.videoRecorder.stopRecording((function(t){e(t,"video")})),this.gifRecorder&&this.gifRecorder.stopRecording((function(t){e(t,"gif")}))},this.pauseRecording=function(){this.audioRecorder&&this.audioRecorder.pauseRecording(),this.videoRecorder&&this.videoRecorder.pauseRecording(),this.gifRecorder&&this.gifRecorder.pauseRecording()},this.resumeRecording=function(){this.audioRecorder&&this.audioRecorder.resumeRecording(),this.videoRecorder&&this.videoRecorder.resumeRecording(),this.gifRecorder&&this.gifRecorder.resumeRecording()},this.getBlob=function(e){var t={};return this.audioRecorder&&(t.audio=this.audioRecorder.getBlob()),this.videoRecorder&&(t.video=this.videoRecorder.getBlob()),this.gifRecorder&&(t.gif=this.gifRecorder.getBlob()),e&&e(t),t},this.destroy=function(){this.audioRecorder&&(this.audioRecorder.destroy(),this.audioRecorder=null),this.videoRecorder&&(this.videoRecorder.destroy(),this.videoRecorder=null),this.gifRecorder&&(this.gifRecorder.destroy(),this.gifRecorder=null)},this.getDataURL=function(e){function t(e,t){if("undefined"!=typeof Worker){var r=function(e){var t,r=l.createObjectURL(new Blob([e.toString(),"this.onmessage =  function (eee) {"+e.name+"(eee.data);}"],{type:"application/javascript"})),i=new Worker(r);if(void 0!==l)t=l;else{if("undefined"==typeof webkitURL)throw"Neither URL nor webkitURL detected.";t=webkitURL}return t.revokeObjectURL(r),i}((function(e){postMessage((new FileReaderSync).readAsDataURL(e))}));r.onmessage=function(e){t(e.data)},r.postMessage(e)}else{var i=new FileReader;i.readAsDataURL(e),i.onload=function(e){t(e.target.result)}}}this.getBlob((function(r){r.audio&&r.video?t(r.audio,(function(i){t(r.video,(function(t){e({audio:i,video:t})}))})):r.audio?t(r.audio,(function(t){e({audio:t})})):r.video&&t(r.video,(function(t){e({video:t})}))}))},this.writeToDisk=function(){r.writeToDisk({audio:this.audioRecorder,video:this.videoRecorder,gif:this.gifRecorder})},this.save=function(e){(e=e||{audio:!0,video:!0,gif:!0}).audio&&this.audioRecorder&&this.audioRecorder.save("string"==typeof e.audio?e.audio:""),e.video&&this.videoRecorder&&this.videoRecorder.save("string"==typeof e.video?e.video:""),e.gif&&this.gifRecorder&&this.gifRecorder.save("string"==typeof e.gif?e.gif:"")}}r.version="5.6.2",t.exports=r,r.getFromDisk=function(e,t){if(!t)throw"callback is mandatory.";console.log("Getting recorded "+("all"===e?"blobs":e+" blob ")+" from disk!"),C.Fetch((function(r,i){"all"!==e&&i===e+"Blob"&&t&&t(r),"all"===e&&t&&t(r,i.replace("Blob",""))}))},r.writeToDisk=function(e){console.log("Writing recorded blob(s) to disk!"),(e=e||{}).audio&&e.video&&e.gif?e.audio.getDataURL((function(t){e.video.getDataURL((function(r){e.gif.getDataURL((function(e){C.Store({audioBlob:t,videoBlob:r,gifBlob:e})}))}))})):e.audio&&e.video?e.audio.getDataURL((function(t){e.video.getDataURL((function(e){C.Store({audioBlob:t,videoBlob:e})}))})):e.audio&&e.gif?e.audio.getDataURL((function(t){e.gif.getDataURL((function(e){C.Store({audioBlob:t,gifBlob:e})}))})):e.video&&e.gif?e.video.getDataURL((function(t){e.gif.getDataURL((function(e){C.Store({videoBlob:t,gifBlob:e})}))})):e.audio?e.audio.getDataURL((function(e){C.Store({audioBlob:e})})):e.video?e.video.getDataURL((function(e){C.Store({videoBlob:e})})):e.gif&&e.gif.getDataURL((function(e){C.Store({gifBlob:e})}))},a.getFromDisk=r.getFromDisk,a.writeToDisk=r.writeToDisk,void 0!==r&&(r.MRecordRTC=a);var o;(o=void 0!==e?e:null)&&"undefined"==typeof window&&void 0!==e&&(e.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},e.console||(e.console={}),void 0!==e.console.log&&void 0!==e.console.error||(e.console.error=e.console.log=e.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(o.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},o.HTMLVideoElement=function(){}),"undefined"==typeof location&&(o.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(o.screen={width:0,height:0}),void 0===l&&(o.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),o.window=e);var s=window.requestAnimationFrame;if(void 0===s)if("undefined"!=typeof webkitRequestAnimationFrame)s=webkitRequestAnimationFrame;else if("undefined"!=typeof mozRequestAnimationFrame)s=mozRequestAnimationFrame;else if("undefined"!=typeof msRequestAnimationFrame)s=msRequestAnimationFrame;else if(void 0===s){var d=0;s=function(e,t){var r=(new Date).getTime(),i=Math.max(0,16-(r-d)),n=setTimeout((function(){e(r+i)}),i);return d=r+i,n}}var c=window.cancelAnimationFrame;void 0===c&&("undefined"!=typeof webkitCancelAnimationFrame?c=webkitCancelAnimationFrame:"undefined"!=typeof mozCancelAnimationFrame?c=mozCancelAnimationFrame:"undefined"!=typeof msCancelAnimationFrame?c=msCancelAnimationFrame:void 0===c&&(c=function(e){clearTimeout(e)}));var u=window.AudioContext;void 0===u&&("undefined"!=typeof webkitAudioContext&&(u=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(u=mozAudioContext));var l=window.URL;void 0===l&&"undefined"!=typeof webkitURL&&(l=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var h=!(-1===navigator.userAgent.indexOf("Edge")||!navigator.msSaveBlob&&!navigator.msSaveOrOpenBlob),f=!!window.opera||-1!==navigator.userAgent.indexOf("OPR/"),g=navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&"netscape"in window&&/ rv:/.test(navigator.userAgent),m=!f&&!h&&!!navigator.webkitGetUserMedia||_()||-1!==navigator.userAgent.toLowerCase().indexOf("chrome/"),p=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);p&&!m&&-1!==navigator.userAgent.indexOf("CriOS")&&(p=!1,m=!0);var b=window.MediaStream;function v(e){if(0===e)return"0 Bytes";var t=parseInt(Math.floor(Math.log(e)/Math.log(1e3)),10);return(e/Math.pow(1e3,t)).toPrecision(3)+" "+["Bytes","KB","MB","GB","TB"][t]}function w(e,t){if(!e)throw"Blob object is required.";if(!e.type)try{e.type="video/webm"}catch(e){}var r=(e.type||"video/webm").split("/")[1];if(-1!==r.indexOf(";")&&(r=r.split(";")[0]),t&&-1!==t.indexOf(".")){var i=t.split(".");t=i[0],r=i[1]}var n=(t||Math.round(9999999999*Math.random())+888888888)+"."+r;if(void 0!==navigator.msSaveOrOpenBlob)return navigator.msSaveOrOpenBlob(e,n);if(void 0!==navigator.msSaveBlob)return navigator.msSaveBlob(e,n);var a=document.createElement("a");a.href=l.createObjectURL(e),a.download=n,a.style="display:none;opacity:0;color:transparent;",(document.body||document.documentElement).appendChild(a),"function"==typeof a.click?a.click():(a.target="_blank",a.dispatchEvent(new MouseEvent("click",{view:window,bubbles:!0,cancelable:!0}))),l.revokeObjectURL(a.href)}function _(){return"undefined"!=typeof window&&"object"==typeof window.process&&"renderer"===window.process.type||(!("undefined"==typeof process||"object"!=typeof process.versions||!process.versions.electron)||"object"==typeof navigator&&"string"==typeof navigator.userAgent&&navigator.userAgent.indexOf("Electron")>=0)}function y(e,t){return e&&e.getTracks?e.getTracks().filter((function(e){return e.kind===(t||"audio")})):[]}function S(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}void 0===b&&"undefined"!=typeof webkitMediaStream&&(b=webkitMediaStream),void 0!==b&&void 0===b.prototype.stop&&(b.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))}),void 0!==r&&(r.invokeSaveAsDialog=w,r.getTracks=y,r.getSeekableBlob=function(e,t){if("undefined"==typeof EBML)throw new Error("Please link: https://www.webrtc-experiment.com/EBML.js");var r=new EBML.Reader,i=new EBML.Decoder,n=EBML.tools,a=new FileReader;a.onload=function(e){i.decode(this.result).forEach((function(e){r.read(e)})),r.stop();var a=n.makeMetadataSeekable(r.metadatas,r.duration,r.cues),o=this.result.slice(r.metadataSize),s=new Blob([a,o],{type:"video/webm"});t(s)},a.readAsArrayBuffer(e)},r.bytesToSize=v,r.isElectron=_);var R={};function k(){if(g||p||h)return!0;var e,t,r=navigator.userAgent,i=""+parseFloat(navigator.appVersion),n=parseInt(navigator.appVersion,10);return(m||f)&&(e=r.indexOf("Chrome"),i=r.substring(e+7)),-1!==(t=i.indexOf(";"))&&(i=i.substring(0,t)),-1!==(t=i.indexOf(" "))&&(i=i.substring(0,t)),n=parseInt(""+i,10),isNaN(n)&&(i=""+parseFloat(navigator.appVersion),n=parseInt(navigator.appVersion,10)),n>=49}function A(e,t){var r=this;if(void 0===e)throw'First argument "MediaStream" is required.';if("undefined"==typeof MediaRecorder)throw"Your browser does not support the Media Recorder API. Please try other modules e.g. WhammyRecorder or StereoAudioRecorder.";if("audio"===(t=t||{mimeType:"video/webm"}).type){var i;if(y(e,"video").length&&y(e,"audio").length)navigator.mozGetUserMedia?(i=new b).addTrack(y(e,"audio")[0]):i=new b(y(e,"audio")),e=i;t.mimeType&&-1!==t.mimeType.toString().toLowerCase().indexOf("audio")||(t.mimeType=m?"audio/webm":"audio/ogg"),t.mimeType&&"audio/ogg"!==t.mimeType.toString().toLowerCase()&&navigator.mozGetUserMedia&&(t.mimeType="audio/ogg")}var n,a=[];function o(){r.timestamps.push((new Date).getTime()),"function"==typeof t.onTimeStamp&&t.onTimeStamp(r.timestamps[r.timestamps.length-1],r.timestamps)}function s(e){return n&&n.mimeType?n.mimeType:e.mimeType||"video/webm"}function d(){a=[],n=null,r.timestamps=[]}this.getArrayOfBlobs=function(){return a},this.record=function(){r.blob=null,r.clearRecordedData(),r.timestamps=[],c=[],a=[];var i=t;t.disableLogs||console.log("Passing following config over MediaRecorder API.",i),n&&(n=null),m&&!k()&&(i="video/vp8"),"function"==typeof MediaRecorder.isTypeSupported&&i.mimeType&&(MediaRecorder.isTypeSupported(i.mimeType)||(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",i.mimeType),i.mimeType="audio"===t.type?"audio/webm":"video/webm"));try{n=new MediaRecorder(e,i),t.mimeType=i.mimeType}catch(t){n=new MediaRecorder(e)}i.mimeType&&!MediaRecorder.isTypeSupported&&"canRecordMimeType"in n&&!1===n.canRecordMimeType(i.mimeType)&&(t.disableLogs||console.warn("MediaRecorder API seems unable to record mimeType:",i.mimeType)),n.ondataavailable=function(e){if(e.data&&c.push("ondataavailable: "+v(e.data.size)),"number"!=typeof t.timeSlice)!e.data||!e.data.size||e.data.size<100||r.blob?r.recordingCallback&&(r.recordingCallback(new Blob([],{type:s(i)})),r.recordingCallback=null):(r.blob=t.getNativeBlob?e.data:new Blob([e.data],{type:s(i)}),r.recordingCallback&&(r.recordingCallback(r.blob),r.recordingCallback=null));else if(e.data&&e.data.size&&(a.push(e.data),o(),"function"==typeof t.ondataavailable)){var n=t.getNativeBlob?e.data:new Blob([e.data],{type:s(i)});t.ondataavailable(n)}},n.onstart=function(){c.push("started")},n.onpause=function(){c.push("paused")},n.onresume=function(){c.push("resumed")},n.onstop=function(){c.push("stopped")},n.onerror=function(e){e&&(e.name||(e.name="UnknownError"),c.push("error: "+e),t.disableLogs||(-1!==e.name.toString().toLowerCase().indexOf("invalidstate")?console.error("The MediaRecorder is not in a state in which the proposed operation is allowed to be executed.",e):-1!==e.name.toString().toLowerCase().indexOf("notsupported")?console.error("MIME type (",i.mimeType,") is not supported.",e):-1!==e.name.toString().toLowerCase().indexOf("security")?console.error("MediaRecorder security error",e):"OutOfMemory"===e.name?console.error("The UA has exhaused the available memory. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"IllegalStreamModification"===e.name?console.error("A modification to the stream has occurred that makes it impossible to continue recording. An example would be the addition of a Track while recording is occurring. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"OtherRecordingError"===e.name?console.error("Used for an fatal error other than those listed above. User agents SHOULD provide as much additional information as possible in the message attribute.",e):"GenericError"===e.name?console.error("The UA cannot provide the codec or recording option that has been requested.",e):console.error("MediaRecorder Error",e)),function(e){if(!r.manuallyStopped&&n&&"inactive"===n.state)return delete t.timeslice,void n.start(6e5);setTimeout(void 0,1e3)}(),"inactive"!==n.state&&"stopped"!==n.state&&n.stop())},"number"==typeof t.timeSlice?(o(),n.start(t.timeSlice)):n.start(36e5),t.initCallback&&t.initCallback()},this.timestamps=[],this.stop=function(e){e=e||function(){},r.manuallyStopped=!0,n&&(this.recordingCallback=e,"recording"===n.state&&n.stop(),"number"==typeof t.timeSlice&&setTimeout((function(){r.blob=new Blob(a,{type:s(t)}),r.recordingCallback(r.blob)}),100))},this.pause=function(){n&&"recording"===n.state&&n.pause()},this.resume=function(){n&&"paused"===n.state&&n.resume()},this.clearRecordedData=function(){n&&"recording"===n.state&&r.stop(d),d()},this.getInternalRecorder=function(){return n},this.blob=null,this.getState=function(){return n&&n.state||"inactive"};var c=[];this.getAllStates=function(){return c},void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!1);r=this;!function i(){if(n&&!1!==t.checkForInactiveTracks)return!1===function(){if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}()?(t.disableLogs||console.log("MediaStream seems stopped."),void r.stop()):void setTimeout(i,1e3)}(),this.name="MediaStreamRecorder",this.toString=function(){return this.name}}function M(e,t){if(!y(e,"audio").length)throw"Your stream has no audio tracks.";var i,n=this,a=[],o=[],s=!1,d=0,c=2,u=(t=t||{}).desiredSampRate;function h(){if(!1===t.checkForInactiveTracks)return!0;if("active"in e){if(!e.active)return!1}else if("ended"in e&&e.ended)return!1;return!0}function f(e,t){function r(e,t){var r,i=e.numberOfAudioChannels,n=e.leftBuffers.slice(0),a=e.rightBuffers.slice(0),o=e.sampleRate,s=e.internalInterleavedLength,d=e.desiredSampRate;function c(e,t,r){var i=Math.round(e.length*(t/r)),n=[],a=Number((e.length-1)/(i-1));n[0]=e[0];for(var o=1;o<i-1;o++){var s=o*a,d=Number(Math.floor(s)).toFixed(),c=Number(Math.ceil(s)).toFixed(),l=s-d;n[o]=u(e[d],e[c],l)}return n[i-1]=e[e.length-1],n}function u(e,t,r){return e+(t-e)*r}function l(e,t){for(var r=new Float64Array(t),i=0,n=e.length,a=0;a<n;a++){var o=e[a];r.set(o,i),i+=o.length}return r}function h(e,t,r){for(var i=r.length,n=0;n<i;n++)e.setUint8(t+n,r.charCodeAt(n))}2===i&&(n=l(n,s),a=l(a,s),d&&(n=c(n,d,o),a=c(a,d,o))),1===i&&(n=l(n,s),d&&(n=c(n,d,o))),d&&(o=d),2===i&&(r=function(e,t){for(var r=e.length+t.length,i=new Float64Array(r),n=0,a=0;a<r;)i[a++]=e[n],i[a++]=t[n],n++;return i}(n,a)),1===i&&(r=n);var f=r.length,g=new ArrayBuffer(44+2*f),m=new DataView(g);h(m,0,"RIFF"),m.setUint32(4,36+2*f,!0),h(m,8,"WAVE"),h(m,12,"fmt "),m.setUint32(16,16,!0),m.setUint16(20,1,!0),m.setUint16(22,i,!0),m.setUint32(24,o,!0),m.setUint32(28,o*i*2,!0),m.setUint16(32,2*i,!0),m.setUint16(34,16,!0),h(m,36,"data"),m.setUint32(40,2*f,!0);for(var p=f,b=44,v=0;v<p;v++)m.setInt16(b,32767*r[v],!0),b+=2;if(t)return t({buffer:g,view:m});postMessage({buffer:g,view:m})}if(e.noWorker)r(e,(function(e){t(e.buffer,e.view)}));else{var i,n,a,o=(i=r,n=l.createObjectURL(new Blob([i.toString(),";this.onmessage =  function (eee) {"+i.name+"(eee.data);}"],{type:"application/javascript"})),(a=new Worker(n)).workerURL=n,a);o.onmessage=function(e){t(e.data.buffer,e.data.view),l.revokeObjectURL(o.workerURL),o.terminate()},o.postMessage(e)}}!0===t.leftChannel&&(c=1),1===t.numberOfAudioChannels&&(c=1),(!c||c<1)&&(c=2),t.disableLogs||console.log("StereoAudioRecorder is set to record number of channels: "+c),void 0===t.checkForInactiveTracks&&(t.checkForInactiveTracks=!0),this.record=function(){if(!1===h())throw"Please make sure MediaStream is active.";_(),R=w=!1,s=!0,void 0!==t.timeSlice&&A()},this.stop=function(e){e=e||function(){},s=!1,f({desiredSampRate:u,sampleRate:v,numberOfAudioChannels:c,internalInterleavedLength:d,leftBuffers:a,rightBuffers:1===c?[]:o,noWorker:t.noWorker},(function(t,r){n.blob=new Blob([r],{type:"audio/wav"}),n.buffer=new ArrayBuffer(r.buffer.byteLength),n.view=r,n.sampleRate=u||v,n.bufferSize=b,n.length=d,R=!1,e&&e(n.blob)}))},void 0===r.Storage&&(r.Storage={AudioContextConstructor:null,AudioContext:window.AudioContext||window.webkitAudioContext}),r.Storage.AudioContextConstructor&&"closed"!==r.Storage.AudioContextConstructor.state||(r.Storage.AudioContextConstructor=new r.Storage.AudioContext);var g=r.Storage.AudioContextConstructor,m=g.createMediaStreamSource(e),p=[0,256,512,1024,2048,4096,8192,16384],b=void 0===t.bufferSize?4096:t.bufferSize;if(-1===p.indexOf(b)&&(t.disableLogs||console.log("Legal values for buffer-size are "+JSON.stringify(p,null,"\t"))),g.createJavaScriptNode)i=g.createJavaScriptNode(b,c,c);else{if(!g.createScriptProcessor)throw"WebAudio API has no support on this browser.";i=g.createScriptProcessor(b,c,c)}m.connect(i),t.bufferSize||(b=i.bufferSize);var v=void 0!==t.sampleRate?t.sampleRate:g.sampleRate||44100;(v<22050||v>96e3)&&(t.disableLogs||console.log("sample-rate must be under range 22050 and 96000.")),t.disableLogs||t.desiredSampRate&&console.log("Desired sample-rate: "+t.desiredSampRate);var w=!1;function _(){a=[],o=[],d=0,R=!1,s=!1,w=!1,g=null,n.leftchannel=a,n.rightchannel=o,n.numberOfAudioChannels=c,n.desiredSampRate=u,n.sampleRate=v,n.recordingLength=d,k={left:[],right:[],recordingLength:0}}function S(){i&&(i.onaudioprocess=null,i.disconnect(),i=null),m&&(m.disconnect(),m=null),_()}this.pause=function(){w=!0},this.resume=function(){if(!1===h())throw"Please make sure MediaStream is active.";if(!s)return t.disableLogs||console.log("Seems recording has been restarted."),void this.record();w=!1},this.clearRecordedData=function(){t.checkForInactiveTracks=!1,s&&this.stop(S),S()},this.name="StereoAudioRecorder",this.toString=function(){return this.name};var R=!1;i.onaudioprocess=function(e){if(!w)if(!1===h()&&(t.disableLogs||console.log("MediaStream seems stopped."),i.disconnect(),s=!1),s){R||(R=!0,t.onAudioProcessStarted&&t.onAudioProcessStarted(),t.initCallback&&t.initCallback());var r=e.inputBuffer.getChannelData(0),u=new Float32Array(r);if(a.push(u),2===c){var l=e.inputBuffer.getChannelData(1),f=new Float32Array(l);o.push(f)}d+=b,n.recordingLength=d,void 0!==t.timeSlice&&(k.recordingLength+=b,k.left.push(u),2===c&&k.right.push(f))}else m&&(m.disconnect(),m=null)},g.createMediaStreamDestination?i.connect(g.createMediaStreamDestination()):i.connect(g.destination),this.leftchannel=a,this.rightchannel=o,this.numberOfAudioChannels=c,this.desiredSampRate=u,this.sampleRate=v,n.recordingLength=d;var k={left:[],right:[],recordingLength:0};function A(){s&&"function"==typeof t.ondataavailable&&void 0!==t.timeSlice&&(k.left.length?(f({desiredSampRate:u,sampleRate:v,numberOfAudioChannels:c,internalInterleavedLength:k.recordingLength,leftBuffers:k.left,rightBuffers:1===c?[]:k.right},(function(e,r){var i=new Blob([r],{type:"audio/wav"});t.ondataavailable(i),setTimeout(A,t.timeSlice)})),k={left:[],right:[],recordingLength:0}):setTimeout(A,t.timeSlice))}}function x(e,t){if("undefined"==typeof html2canvas)throw"Please link: https://www.webrtc-experiment.com/screenshot.js";(t=t||{}).frameInterval||(t.frameInterval=10);var r=!1;["captureStream","mozCaptureStream","webkitCaptureStream"].forEach((function(e){e in document.createElement("canvas")&&(r=!0)}));var i,n,a,o=!(!window.webkitRTCPeerConnection&&!window.webkitGetUserMedia||!window.chrome),s=50,d=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);if(o&&d&&d[2]&&(s=parseInt(d[2],10)),o&&s<52&&(r=!1),t.useWhammyRecorder&&(r=!1),r)if(t.disableLogs||console.log("Your browser supports both MediRecorder API and canvas.captureStream!"),e instanceof HTMLCanvasElement)i=e;else{if(!(e instanceof CanvasRenderingContext2D))throw"Please pass either HTMLCanvasElement or CanvasRenderingContext2D.";i=e.canvas}else navigator.mozGetUserMedia&&(t.disableLogs||console.error("Canvas recording is NOT supported in Firefox."));this.record=function(){if(a=!0,r&&!t.useWhammyRecorder){var e;"captureStream"in i?e=i.captureStream(25):"mozCaptureStream"in i?e=i.mozCaptureStream(25):"webkitCaptureStream"in i&&(e=i.webkitCaptureStream(25));try{var o=new b;o.addTrack(y(e,"video")[0]),e=o}catch(e){}if(!e)throw"captureStream API are NOT available.";(n=new A(e,{mimeType:t.mimeType||"video/webm"})).record()}else f.frames=[],h=(new Date).getTime(),l();t.initCallback&&t.initCallback()},this.getWebPImages=function(r){if("canvas"===e.nodeName.toLowerCase()){var i=f.frames.length;f.frames.forEach((function(e,r){var n=i-r;t.disableLogs||console.log(n+"/"+i+" frames remaining"),t.onEncodingCallback&&t.onEncodingCallback(n,i);var a=e.image.toDataURL("image/webp",1);f.frames[r].image=a})),t.disableLogs||console.log("Generating WebM"),r()}else r()},this.stop=function(e){a=!1;var i=this;r&&n?n.stop(e):this.getWebPImages((function(){f.compile((function(r){t.disableLogs||console.log("Recording finished!"),i.blob=r,i.blob.forEach&&(i.blob=new Blob([],{type:"video/webm"})),e&&e(i.blob),f.frames=[]}))}))};var c=!1;function u(){f.frames=[],a=!1,c=!1}function l(){if(c)return h=(new Date).getTime(),setTimeout(l,500);if("canvas"===e.nodeName.toLowerCase()){var r=(new Date).getTime()-h;return h=(new Date).getTime(),f.frames.push({image:(i=document.createElement("canvas"),n=i.getContext("2d"),i.width=e.width,i.height=e.height,n.drawImage(e,0,0),i),duration:r}),void(a&&setTimeout(l,t.frameInterval))}var i,n;html2canvas(e,{grabMouse:void 0===t.showMousePointer||t.showMousePointer,onrendered:function(e){var r=(new Date).getTime()-h;if(!r)return setTimeout(l,t.frameInterval);h=(new Date).getTime(),f.frames.push({image:e.toDataURL("image/webp",1),duration:r}),a&&setTimeout(l,t.frameInterval)}})}this.pause=function(){c=!0,n instanceof A&&n.pause()},this.resume=function(){c=!1,n instanceof A?n.resume():a||this.record()},this.clearRecordedData=function(){a&&this.stop(u),u()},this.name="CanvasRecorder",this.toString=function(){return this.name};var h=(new Date).getTime(),f=new T.Video(100)}function E(e,t){function r(e){e=void 0!==e?e:10;var t=(new Date).getTime()-d;return t?a?(d=(new Date).getTime(),setTimeout(r,100)):(d=(new Date).getTime(),s.paused&&s.play(),l.drawImage(s,0,0,u.width,u.height),c.frames.push({duration:t,image:u.toDataURL("image/webp")}),void(n||setTimeout(r,e,e))):setTimeout(r,e,e)}function i(e,t,r,i,n){var a=document.createElement("canvas");a.width=u.width,a.height=u.height;var o,s,d,c=a.getContext("2d"),l=[],h=-1===t,f=t&&t>0&&t<=e.length?t:e.length,g=0,m=0,p=0,b=Math.sqrt(Math.pow(255,2)+Math.pow(255,2)+Math.pow(255,2)),v=r&&r>=0&&r<=1?r:0,w=i&&i>=0&&i<=1?i:0,_=!1;s=-1,d=(o={length:f,functionToLoop:function(t,r){var i,n,a,o=function(){!_&&a-i<=a*w||(h&&(_=!0),l.push(e[r])),t()};if(_)o();else{var s=new Image;s.onload=function(){c.drawImage(s,0,0,u.width,u.height);var e=c.getImageData(0,0,u.width,u.height);i=0,n=e.data.length,a=e.data.length/4;for(var t=0;t<n;t+=4){var r={r:e.data[t],g:e.data[t+1],b:e.data[t+2]};Math.sqrt(Math.pow(r.r-g,2)+Math.pow(r.g-m,2)+Math.pow(r.b-p,2))<=b*v&&i++}o()},s.src=e[r].image}},callback:function(){(l=l.concat(e.slice(f))).length<=0&&l.push(e[e.length-1]),n(l)}}).length,function e(){++s!==d?setTimeout((function(){o.functionToLoop(e,s)}),1):o.callback()}()}(t=t||{}).frameInterval||(t.frameInterval=10),t.disableLogs||console.log("Using frames-interval:",t.frameInterval),this.record=function(){t.width||(t.width=320),t.height||(t.height=240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),u.width=t.canvas.width||320,u.height=t.canvas.height||240,l=u.getContext("2d"),t.video&&t.video instanceof HTMLVideoElement?(s=t.video.cloneNode(),t.initCallback&&t.initCallback()):(s=document.createElement("video"),S(e,s),s.onloadedmetadata=function(){t.initCallback&&t.initCallback()},s.width=t.video.width,s.height=t.video.height),s.muted=!0,s.play(),d=(new Date).getTime(),c=new T.Video,t.disableLogs||(console.log("canvas resolutions",u.width,"*",u.height),console.log("video width/height",s.width||u.width,"*",s.height||u.height)),r(t.frameInterval)};var n=!1;this.stop=function(e){e=e||function(){},n=!0;var r=this;setTimeout((function(){i(c.frames,-1,null,null,(function(i){c.frames=i,t.advertisement&&t.advertisement.length&&(c.frames=t.advertisement.concat(c.frames)),c.compile((function(t){r.blob=t,r.blob.forEach&&(r.blob=new Blob([],{type:"video/webm"})),e&&e(r.blob)}))}))}),10)};var a=!1;function o(){c.frames=[],n=!0,a=!1}this.pause=function(){a=!0},this.resume=function(){a=!1,n&&this.record()},this.clearRecordedData=function(){n||this.stop(o),o()},this.name="WhammyRecorder",this.toString=function(){return this.name};var s,d,c,u=document.createElement("canvas"),l=u.getContext("2d")}void 0!==u?R.AudioContext=u:"undefined"!=typeof webkitAudioContext&&(R.AudioContext=webkitAudioContext),void 0!==r&&(r.Storage=R),void 0!==r&&(r.MediaStreamRecorder=A),void 0!==r&&(r.StereoAudioRecorder=M),void 0!==r&&(r.CanvasRecorder=x),void 0!==r&&(r.WhammyRecorder=E);var T=function(){function e(e){this.frames=[],this.duration=e||1,this.quality=.8}function t(e){function t(e,t,r){return[{data:e,id:231}].concat(r.map((function(e){var r=function(e){var t=0;e.keyframe&&(t|=128);e.invisible&&(t|=8);e.lacing&&(t|=e.lacing<<1);e.discardable&&(t|=1);if(e.trackNum>127)throw"TrackNumber > 127 not supported";return[128|e.trackNum,e.timecode>>8,255&e.timecode,t].map((function(e){return String.fromCharCode(e)})).join("")+e.frame}({discardable:0,frame:e.data.slice(4),invisible:0,keyframe:1,lacing:0,trackNum:1,timecode:Math.round(t)});return t+=e.duration,{data:r,id:163}})))}function r(e){for(var t=[];e>0;)t.push(255&e),e>>=8;return new Uint8Array(t.reverse())}function i(e){var t=[];e=(e.length%8?new Array(9-e.length%8).join("0"):"")+e;for(var r=0;r<e.length;r+=8)t.push(parseInt(e.substr(r,8),2));return new Uint8Array(t)}function n(e){for(var t=[],a=0;a<e.length;a++){var o=e[a].data;"object"==typeof o&&(o=n(o)),"number"==typeof o&&(o=i(o.toString(2))),"string"==typeof o&&(o=new Uint8Array(o.split("").map((function(e){return e.charCodeAt(0)}))));var s=o.size||o.byteLength||o.length,d=Math.ceil(Math.ceil(Math.log(s)/Math.log(2))/8),c=s.toString(2),u=new Array(7*d+7+1-c.length).join("0")+c,l=new Array(d).join("0")+"1"+u;t.push(r(e[a].id)),t.push(i(l)),t.push(o)}return new Blob(t,{type:"video/webm"})}function a(e,t){return parseInt(e.substr(t+4,4).split("").map((function(e){var t=e.charCodeAt(0).toString(2);return new Array(8-t.length+1).join("0")+t})).join(""),2)}function o(e){for(var t=0,r={};t<e.length;){var i=e.substr(t,4),n=a(e,t),s=e.substr(t+4+4,n);t+=8+n,r[i]=r[i]||[],"RIFF"===i||"LIST"===i?r[i].push(o(s)):r[i].push(s)}return r}var s=new function(e){var r=function(e){if(!e[0])return void postMessage({error:"Something went wrong. Maybe WebP format is not supported in the current browser."});for(var t=e[0].width,r=e[0].height,i=e[0].duration,n=1;n<e.length;n++)i+=e[n].duration;return{duration:i,width:t,height:r}}(e);if(!r)return[];for(var i,a=[{id:440786851,data:[{data:1,id:17030},{data:1,id:17143},{data:4,id:17138},{data:8,id:17139},{data:"webm",id:17026},{data:2,id:17031},{data:2,id:17029}]},{id:408125543,data:[{id:357149030,data:[{data:1e6,id:2807729},{data:"whammy",id:19840},{data:"whammy",id:22337},{data:(i=r.duration,[].slice.call(new Uint8Array(new Float64Array([i]).buffer),0).map((function(e){return String.fromCharCode(e)})).reverse().join("")),id:17545}]},{id:374648427,data:[{id:174,data:[{data:1,id:215},{data:1,id:29637},{data:0,id:156},{data:"und",id:2274716},{data:"V_VP8",id:134},{data:"VP8",id:2459272},{data:1,id:131},{id:224,data:[{data:r.width,id:176},{data:r.height,id:186}]}]}]}]}],o=0,s=0;o<e.length;){var d=[],c=0;do{d.push(e[o]),c+=e[o].duration,o++}while(o<e.length&&c<3e4);var u={id:524531317,data:t(s,0,d)};a[1].data.push(u),s+=c}return n(a)}(e.map((function(e){var t=function(e){for(var t=e.RIFF[0].WEBP[0],r=t.indexOf("*"),i=0,n=[];i<4;i++)n[i]=t.charCodeAt(r+3+i);return{width:16383&(n[1]<<8|n[0]),height:16383&(n[3]<<8|n[2]),data:t,riff:e}}(o(atob(e.image.slice(23))));return t.duration=e.duration,t})));postMessage(s)}return e.prototype.add=function(e,t){if("canvas"in e&&(e=e.canvas),"toDataURL"in e&&(e=e.toDataURL("image/webp",this.quality)),!/^data:image\/webp;base64,/gi.test(e))throw"Input must be formatted properly as a base64 encoded DataURI of type image/webp";this.frames.push({image:e,duration:t||this.duration})},e.prototype.compile=function(e){var r,i,n,a=(r=t,i=l.createObjectURL(new Blob([r.toString(),"this.onmessage =  function (eee) {"+r.name+"(eee.data);}"],{type:"application/javascript"})),n=new Worker(i),l.revokeObjectURL(i),n);a.onmessage=function(t){t.data.error?console.error(t.data.error):e(t.data)},a.postMessage(this.frames)},{Video:e}}();void 0!==r&&(r.Whammy=T);var C={init:function(){var e=this;if("undefined"!=typeof indexedDB&&void 0!==indexedDB.open){var t,r=this.dbName||location.href.replace(/\/|:|#|%|\.|\[|\]/g,""),i=indexedDB.open(r,1);i.onerror=e.onError,i.onsuccess=function(){((t=i.result).onerror=e.onError,t.setVersion)?1!==t.version?t.setVersion(1).onsuccess=function(){n(t),a()}:a():a()},i.onupgradeneeded=function(e){n(e.target.result)}}else console.error("IndexedDB API are not available in this browser.");function n(t){t.createObjectStore(e.dataStoreName)}function a(){var r=t.transaction([e.dataStoreName],"readwrite");function i(t){r.objectStore(e.dataStoreName).get(t).onsuccess=function(r){e.callback&&e.callback(r.target.result,t)}}e.videoBlob&&r.objectStore(e.dataStoreName).put(e.videoBlob,"videoBlob"),e.gifBlob&&r.objectStore(e.dataStoreName).put(e.gifBlob,"gifBlob"),e.audioBlob&&r.objectStore(e.dataStoreName).put(e.audioBlob,"audioBlob"),i("audioBlob"),i("videoBlob"),i("gifBlob")}},Fetch:function(e){return this.callback=e,this.init(),this},Store:function(e){return this.audioBlob=e.audioBlob,this.videoBlob=e.videoBlob,this.gifBlob=e.gifBlob,this.init(),this},onError:function(e){console.error(JSON.stringify(e,null,"\t"))},dataStoreName:"recordRTC",dbName:null};function P(e,t){if("undefined"==typeof GIFEncoder){var r=document.createElement("script");r.src="https://www.webrtc-experiment.com/gif-recorder.js",(document.body||document.documentElement).appendChild(r)}t=t||{};var i=e instanceof CanvasRenderingContext2D||e instanceof HTMLCanvasElement;this.record=function(){"undefined"!=typeof GIFEncoder&&d?(i||(t.width||(t.width=u.offsetWidth||320),t.height||(t.height=u.offsetHeight||240),t.video||(t.video={width:t.width,height:t.height}),t.canvas||(t.canvas={width:t.width,height:t.height}),a.width=t.canvas.width||320,a.height=t.canvas.height||240,u.width=t.video.width||320,u.height=t.video.height||240),(h=new GIFEncoder).setRepeat(0),h.setDelay(t.frameRate||200),h.setQuality(t.quality||10),h.start(),"function"==typeof t.onGifRecordingStarted&&t.onGifRecordingStarted(),f=s((function e(r){if(!0!==g.clearedRecordedData){if(n)return setTimeout((function(){e(r)}),100);f=s(e),void 0===typeof l&&(l=r),r-l<90||(!i&&u.paused&&u.play(),i||o.drawImage(u,0,0,a.width,a.height),t.onGifPreview&&t.onGifPreview(a.toDataURL("image/png")),h.addFrame(o),l=r)}})),t.initCallback&&t.initCallback()):setTimeout(g.record,1e3)},this.stop=function(e){e=e||function(){},f&&c(f),this.blob=new Blob([new Uint8Array(h.stream().bin)],{type:"image/gif"}),e(this.blob),h.stream().bin=[]};var n=!1;this.pause=function(){n=!0},this.resume=function(){n=!1},this.clearRecordedData=function(){g.clearedRecordedData=!0,h&&(h.stream().bin=[])},this.name="GifRecorder",this.toString=function(){return this.name};var a=document.createElement("canvas"),o=a.getContext("2d");i&&(e instanceof CanvasRenderingContext2D?a=(o=e).canvas:e instanceof HTMLCanvasElement&&(o=e.getContext("2d"),a=e));var d=!0;if(!i){var u=document.createElement("video");u.muted=!0,u.autoplay=!0,u.playsInline=!0,d=!1,u.onloadedmetadata=function(){d=!0},S(e,u),u.play()}var l,h,f=null,g=this}function D(t,i){!function(t){void 0===r&&t&&"undefined"==typeof window&&void 0!==e&&(e.navigator={userAgent:"Fake/5.0 (FakeOS) AppleWebKit/123 (KHTML, like Gecko) Fake/12.3.4567.89 Fake/123.45",getUserMedia:function(){}},e.console||(e.console={}),void 0!==e.console.log&&void 0!==e.console.error||(e.console.error=e.console.log=e.console.log||function(){console.log(arguments)}),"undefined"==typeof document&&(t.document={documentElement:{appendChild:function(){return""}}},document.createElement=document.captureStream=document.mozCaptureStream=function(){var e={getContext:function(){return e},play:function(){},pause:function(){},drawImage:function(){},toDataURL:function(){return""},style:{}};return e},t.HTMLVideoElement=function(){}),"undefined"==typeof location&&(t.location={protocol:"file:",href:"",hash:""}),"undefined"==typeof screen&&(t.screen={width:0,height:0}),void 0===u&&(t.URL={createObjectURL:function(){return""},revokeObjectURL:function(){return""}}),t.window=e)}(void 0!==e?e:null),i=i||"multi-streams-mixer";var n=[],a=!1,o=document.createElement("canvas"),s=o.getContext("2d");o.style.opacity=0,o.style.position="absolute",o.style.zIndex=-1,o.style.top="-1000em",o.style.left="-1000em",o.className=i,(document.body||document.documentElement).appendChild(o),this.disableLogs=!1,this.frameInterval=10,this.width=360,this.height=240,this.useGainNode=!0;var d=this,c=window.AudioContext;void 0===c&&("undefined"!=typeof webkitAudioContext&&(c=webkitAudioContext),"undefined"!=typeof mozAudioContext&&(c=mozAudioContext));var u=window.URL;void 0===u&&"undefined"!=typeof webkitURL&&(u=webkitURL),"undefined"!=typeof navigator&&void 0===navigator.getUserMedia&&(void 0!==navigator.webkitGetUserMedia&&(navigator.getUserMedia=navigator.webkitGetUserMedia),void 0!==navigator.mozGetUserMedia&&(navigator.getUserMedia=navigator.mozGetUserMedia));var l=window.MediaStream;void 0===l&&"undefined"!=typeof webkitMediaStream&&(l=webkitMediaStream),void 0!==l&&void 0===l.prototype.stop&&(l.prototype.stop=function(){this.getTracks().forEach((function(e){e.stop()}))});var h={};function f(){if(!a){var e=n.length,t=!1,r=[];if(n.forEach((function(e){e.stream||(e.stream={}),e.stream.fullcanvas?t=e:r.push(e)})),t)o.width=t.stream.width,o.height=t.stream.height;else if(r.length){o.width=e>1?2*r[0].width:r[0].width;var i=1;3!==e&&4!==e||(i=2),5!==e&&6!==e||(i=3),7!==e&&8!==e||(i=4),9!==e&&10!==e||(i=5),o.height=r[0].height*i}else o.width=d.width||360,o.height=d.height||240;t&&t instanceof HTMLVideoElement&&g(t),r.forEach((function(e,t){g(e,t)})),setTimeout(f,d.frameInterval)}}function g(e,t){if(!a){var r=0,i=0,n=e.width,o=e.height;1===t&&(r=e.width),2===t&&(i=e.height),3===t&&(r=e.width,i=e.height),4===t&&(i=2*e.height),5===t&&(r=e.width,i=2*e.height),6===t&&(i=3*e.height),7===t&&(r=e.width,i=3*e.height),void 0!==e.stream.left&&(r=e.stream.left),void 0!==e.stream.top&&(i=e.stream.top),void 0!==e.stream.width&&(n=e.stream.width),void 0!==e.stream.height&&(o=e.stream.height),s.drawImage(e,r,i,n,o),"function"==typeof e.stream.onRender&&e.stream.onRender(s,r,i,n,o,t)}}function m(e){var t=document.createElement("video");return function(e,t){"srcObject"in t?t.srcObject=e:"mozSrcObject"in t?t.mozSrcObject=e:t.srcObject=e}(e,t),t.className=i,t.muted=!0,t.volume=0,t.width=e.width||d.width||360,t.height=e.height||d.height||240,t.play(),t}function p(e){n=[],(e=e||t).forEach((function(e){if(e.getTracks().filter((function(e){return"video"===e.kind})).length){var t=m(e);t.stream=e,n.push(t)}}))}void 0!==c?h.AudioContext=c:"undefined"!=typeof webkitAudioContext&&(h.AudioContext=webkitAudioContext),this.startDrawingFrames=function(){f()},this.appendStreams=function(e){if(!e)throw"First parameter is required.";e instanceof Array||(e=[e]),e.forEach((function(e){var r=new l;if(e.getTracks().filter((function(e){return"video"===e.kind})).length){var i=m(e);i.stream=e,n.push(i),r.addTrack(e.getTracks().filter((function(e){return"video"===e.kind}))[0])}if(e.getTracks().filter((function(e){return"audio"===e.kind})).length){var a=d.audioContext.createMediaStreamSource(e);d.audioDestination=d.audioContext.createMediaStreamDestination(),a.connect(d.audioDestination),r.addTrack(d.audioDestination.stream.getTracks().filter((function(e){return"audio"===e.kind}))[0])}t.push(r)}))},this.releaseStreams=function(){n=[],a=!0,d.gainNode&&(d.gainNode.disconnect(),d.gainNode=null),d.audioSources.length&&(d.audioSources.forEach((function(e){e.disconnect()})),d.audioSources=[]),d.audioDestination&&(d.audioDestination.disconnect(),d.audioDestination=null),d.audioContext&&d.audioContext.close(),d.audioContext=null,s.clearRect(0,0,o.width,o.height),o.stream&&(o.stream.stop(),o.stream=null)},this.resetVideoStreams=function(e){!e||e instanceof Array||(e=[e]),p(e)},this.name="MultiStreamsMixer",this.toString=function(){return this.name},this.getMixedStream=function(){a=!1;var e=function(){var e;p(),"captureStream"in o?e=o.captureStream():"mozCaptureStream"in o?e=o.mozCaptureStream():d.disableLogs||console.error("Upgrade to latest Chrome or otherwise enable this flag: chrome://flags/#enable-experimental-web-platform-features");var t=new l;return e.getTracks().filter((function(e){return"video"===e.kind})).forEach((function(e){t.addTrack(e)})),o.stream=t,t}(),r=function(){h.AudioContextConstructor||(h.AudioContextConstructor=new h.AudioContext);d.audioContext=h.AudioContextConstructor,d.audioSources=[],!0===d.useGainNode&&(d.gainNode=d.audioContext.createGain(),d.gainNode.connect(d.audioContext.destination),d.gainNode.gain.value=0);var e=0;if(t.forEach((function(t){if(t.getTracks().filter((function(e){return"audio"===e.kind})).length){e++;var r=d.audioContext.createMediaStreamSource(t);!0===d.useGainNode&&r.connect(d.gainNode),d.audioSources.push(r)}})),!e)return;return d.audioDestination=d.audioContext.createMediaStreamDestination(),d.audioSources.forEach((function(e){e.connect(d.audioDestination)})),d.audioDestination.stream}();return r&&r.getTracks().filter((function(e){return"audio"===e.kind})).forEach((function(t){e.addTrack(t)})),t.forEach((function(e){e.fullcanvas})),e}}function F(e,t){e=e||[];var r,i,n=this;(t=t||{elementClass:"multi-streams-mixer",mimeType:"video/webm",video:{width:360,height:240}}).frameInterval||(t.frameInterval=10),t.video||(t.video={}),t.video.width||(t.video.width=360),t.video.height||(t.video.height=240),this.record=function(){var n;r=new D(e,t.elementClass||"multi-streams-mixer"),(n=[],e.forEach((function(e){y(e,"video").forEach((function(e){n.push(e)}))})),n).length&&(r.frameInterval=t.frameInterval||10,r.width=t.video.width||360,r.height=t.video.height||240,r.startDrawingFrames()),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(r.getMixedStream()),(i=new A(r.getMixedStream(),t)).record()},this.stop=function(e){i&&i.stop((function(t){n.blob=t,e(t),n.clearRecordedData()}))},this.pause=function(){i&&i.pause()},this.resume=function(){i&&i.resume()},this.clearRecordedData=function(){i&&(i.clearRecordedData(),i=null),r&&(r.releaseStreams(),r=null)},this.addStreams=function(n){if(!n)throw"First parameter is required.";n instanceof Array||(n=[n]),e.concat(n),i&&r&&(r.appendStreams(n),t.previewStream&&"function"==typeof t.previewStream&&t.previewStream(r.getMixedStream()))},this.resetVideoStreams=function(e){r&&(!e||e instanceof Array||(e=[e]),r.resetVideoStreams(e))},this.getMixer=function(){return r},this.name="MultiStreamRecorder",this.toString=function(){return this.name}}function L(e,t){var r,i,n;function a(){return new ReadableStream({start:function(i){var n=document.createElement("canvas"),a=document.createElement("video"),o=!0;a.srcObject=e,a.muted=!0,a.height=t.height,a.width=t.width,a.volume=0,a.onplaying=function(){n.width=t.width,n.height=t.height;var e=n.getContext("2d"),s=1e3/t.frameRate,d=setInterval((function(){if(r&&(clearInterval(d),i.close()),o&&(o=!1,t.onVideoProcessStarted&&t.onVideoProcessStarted()),e.drawImage(a,0,0),"closed"!==i._controlledReadableStream.state)try{i.enqueue(e.getImageData(0,0,t.width,t.height))}catch(e){}}),s)},a.play()}})}function o(e,d){if(!t.workerPath&&!d)return r=!1,void fetch("https://unpkg.com/webm-wasm@latest/dist/webm-worker.js").then((function(t){t.arrayBuffer().then((function(t){o(e,t)}))}));if(!t.workerPath&&d instanceof ArrayBuffer){var c=new Blob([d],{type:"text/javascript"});t.workerPath=l.createObjectURL(c)}t.workerPath||console.error("workerPath parameter is missing."),(i=new Worker(t.workerPath)).postMessage(t.webAssemblyPath||"https://unpkg.com/webm-wasm@latest/dist/webm-wasm.wasm"),i.addEventListener("message",(function(e){"READY"===e.data?(i.postMessage({width:t.width,height:t.height,bitrate:t.bitrate||1200,timebaseDen:t.frameRate||30,realtime:t.realtime}),a().pipeTo(new WritableStream({write:function(e){r?console.error("Got image, but recorder is finished!"):i.postMessage(e.data.buffer,[e.data.buffer])}}))):e.data&&(n||s.push(e.data))}))}"undefined"!=typeof ReadableStream&&"undefined"!=typeof WritableStream||console.error("Following polyfill is strongly recommended: https://unpkg.com/@mattiasbuelens/web-streams-polyfill/dist/polyfill.min.js"),(t=t||{}).width=t.width||640,t.height=t.height||480,t.frameRate=t.frameRate||30,t.bitrate=t.bitrate||1200,t.realtime=t.realtime||!0,this.record=function(){s=[],n=!1,this.blob=null,o(e),"function"==typeof t.initCallback&&t.initCallback()},this.pause=function(){n=!0},this.resume=function(){n=!1};var s=[];this.stop=function(e){r=!0;var t=this;!function(e){i?(i.addEventListener("message",(function(t){null===t.data&&(i.terminate(),i=null,e&&e())})),i.postMessage(null)):e&&e()}((function(){t.blob=new Blob(s,{type:"video/webm"}),e(t.blob)}))},this.name="WebAssemblyRecorder",this.toString=function(){return this.name},this.clearRecordedData=function(){s=[],n=!1,this.blob=null},this.blob=null}void 0!==r&&(r.DiskStorage=C),void 0!==r&&(r.GifRecorder=P),void 0===r&&(t.exports=D),void 0!==r&&(r.MultiStreamRecorder=F),void 0!==r&&(r.RecordRTCPromisesHandler=function(e,t){if(!this)throw'Use "new RecordRTCPromisesHandler()"';if(void 0===e)throw'First argument "MediaStream" is required.';var i=this;i.recordRTC=new r(e,t),this.startRecording=function(){return new Promise((function(e,t){try{i.recordRTC.startRecording(),e()}catch(e){t(e)}}))},this.stopRecording=function(){return new Promise((function(e,t){try{i.recordRTC.stopRecording((function(r){i.blob=i.recordRTC.getBlob(),i.blob&&i.blob.size?e(r):t("Empty blob.",i.blob)}))}catch(e){t(e)}}))},this.pauseRecording=function(){return new Promise((function(e,t){try{i.recordRTC.pauseRecording(),e()}catch(e){t(e)}}))},this.resumeRecording=function(){return new Promise((function(e,t){try{i.recordRTC.resumeRecording(),e()}catch(e){t(e)}}))},this.getDataURL=function(e){return new Promise((function(e,t){try{i.recordRTC.getDataURL((function(t){e(t)}))}catch(e){t(e)}}))},this.getBlob=function(){return new Promise((function(e,t){try{e(i.recordRTC.getBlob())}catch(e){t(e)}}))},this.getInternalRecorder=function(){return new Promise((function(e,t){try{e(i.recordRTC.getInternalRecorder())}catch(e){t(e)}}))},this.reset=function(){return new Promise((function(e,t){try{e(i.recordRTC.reset())}catch(e){t(e)}}))},this.destroy=function(){return new Promise((function(e,t){try{e(i.recordRTC.destroy())}catch(e){t(e)}}))},this.getState=function(){return new Promise((function(e,t){try{e(i.recordRTC.getState())}catch(e){t(e)}}))},this.blob=null,this.version="5.6.2"}),void 0!==r&&(r.WebAssemblyRecorder=L)}({get exports(){return br},set exports(e){br=e}});const vr="audio/wav";class wr extends pr{audioData=[];recorder;_audioInputDeviceId="";audioBuffer=new Blob;onAudioReady;constructor(e,t,r=undefined,i=undefined){super(r,i,e),this.onAudioProcess=t,this.performEchoCancellation(e)}async echoCancellationAvailable(){return!1}async start(e=undefined){await this.setupAudio(),this.startRecording()}stop(e=undefined){this.stopRecording(),this.audioData.length<1||this.concatenateBlobs(this.audioData,vr,(t=>{e?.(t),this.audioData=[]}))}startWithAudioFile(e){throw new Error("Method not implemented")}async setupAudio(){"recording"==this.recorder?.getState()&&this.stopRecording();let e=async e=>{console.debug(`${(new Date).toISOString()} blob.type: ${e.type} - samples:${e.size/2}`),await e.arrayBuffer().then((async t=>{console.debug(`${(new Date).toISOString()} samples: ${t.byteLength/2} `);try{this.audioData.push(e);const r=new Uint8Array(t),i=r&&r.length&&r.length>0?r.length/2:0;console.debug("calling AcceptAudio"),this.onAudioProcess(r,i)}catch(e){console.log("failed to call AcceptAudio: Error",e),this.stopRecording()}}))};return navigator.mediaDevices.getUserMedia(this.getConstraints()).then((t=>{this.recorder=new br(t,{type:"audio",ondataavailable:e,mimeType:vr,recorderType:br.StereoAudioRecorder,numberOfAudioChannels:1,timeSlice:100,desiredSampRate:this.sampleRate})})).catch((e=>{console.log("KeenASR failed to initialize audio: ",e)}))}getConstraints(){return{video:!1,audio:{channelCount:1,echoCancellation:this.shouldPerformEchoCancellation,noiseSuppression:!1,audioGainControl:!1,sampleSize:this.bytesPerSample,deviceId:this.audioInputDeviceId}}}startRecording(){this.recorder.startRecording(),console.debug("KeenASR.startRecording",this.recorder.state)}stopRecording(){this.recorder.stopRecording(),console.debug("KeenASR.stopRecording",this.recorder.state)}isRecording(){return"recording"===this.recorder.state??!1}concatenateBlobs(e,t,r){var i=[],n=0;function a(e){return[255&(e=Math.floor(e)),e>>8&255,e>>16&255,e>>24&255]}!function o(){if(!e[n])return function(){var e=0;i.forEach((function(t){e+=t.byteLength}));var n,o=new Uint8Array(e),s=0;i.forEach((function(e){n="audio/wav"==t&&s>0?new Uint8Array(e,44):new Uint8Array(e),o.set(n,s),s+=n.length})),"audio/wav"==t&&(o.set(a(s-8),4),o.set(a(s-44),40));var d=new Blob([o.buffer],{type:t});r(d)}();var s=new FileReader;s.onload=function(e){i.push(e.target.result),n++,o()},s.readAsArrayBuffer(e[n])}()}set audioInputDeviceId(e){this._audioInputDeviceId=e}get audioInputDeviceId(){return this._audioInputDeviceId}}const _r="KeenASR:TabUUID.lock";var yr=new class extends gr{tabUUID=globalThis.crypto?.randomUUID()??"";audioController;setAudioInputDevice(e){this.audioController&&(this.audioController.audioInputDeviceId=e)}async getAvailableAudioInputs(e=!1,t){return e&&await this.requestMicrophoneAccess(t),await this.getInputDevices()}async getInputDevices(){return(await navigator.mediaDevices.enumerateDevices()??[]).filter((e=>"audioinput"===e.kind))}async startListening(e){return console.debug("KeenASR.startListening"),this.audioController.performEchoCancellation(e),await this.audioController.start(),this.core.startListening()}async stopListening(){return console.debug("KeenASR.stopListening"),this.core?.stopListening(),!0}onPartialResultPlatform=()=>{};onFinalResultPlatform=e=>{this.audioController.stop(e)};onPartialResultPlatformError=()=>this.audioController.stop();onFinalResultPlatformError=()=>this.audioController.stop();async isMicrophoneAccessEnabled(){return"granted"===(await navigator.permissions.query({name:"microphone"})).state}async requestMicrophoneAccess(e){return new Promise(((t,r)=>{navigator.mediaDevices.getUserMedia({audio:!0,video:!1}).then((r=>{e&&e(r.getAudioTracks()[0].getSettings().deviceId??""),r.getTracks().forEach((e=>e.stop())),t(!0)})).catch((e=>{r(`${e.name} ${e.message}`)}))}))}isIsolatedContext(){return globalThis.crossOriginIsolated}isBrowserSupported(){const e=i.getParser(globalThis.navigator.userAgent);let t=!1;if("getBrowserName"in e){switch(e.getBrowserName(!0)){case"chrome":case"safari":case"microsoft edge":t=!0;break;default:t=!1}}return t}async prepareLock(){const e=this.getKeenASRActiveTabUUID();return null!==e?(console.warn(`A Tab with UUID: ${e} has already initialized the KeenASR Web SDK.`),!1):(this.persistTabUUID(),!0)}hasKeenASRLock(){return this.tabUUID===this.getKeenASRActiveTabUUID()}removeKeenASRLock(){globalThis.localStorage.removeItem(_r),console.log("Removed the active tab lock.")}persistTabUUID(){globalThis.localStorage.setItem(_r,this.tabUUID),console.log(`This tab now has the active tab lock. UUID: ${this.tabUUID}`),globalThis.addEventListener("beforeunload",(e=>{this.removeKeenASRLock()}))}getKeenASRActiveTabUUID(){return globalThis.localStorage.getItem(_r)}async importCore(){try{if(!this.isIsolatedContext())throw new Error("isIsolatedContext() failed. Your web server is not properly setup to serve wasm (https://web.dev/cross-origin-isolation-guide/).",{cause:{isIsolatedContextError:!0}});const{default:e}=await import("./KeenASRCore.js");return this.core=await e(),!0}catch(e){throw e?.cause?.isIsolatedContextError?e:Error(`Failed to import SDK core: ${e?.message??e}`)}}async platformInitialize(e,t){const r=this.core.cwrap("acceptAudio","boolean",["array","number"]);return this.audioController=new wr(!1,r),await this.audioController.setupAudio(),!0}mountAtRoot(e){return new Promise(((t,r)=>{try{this.core.FS.mount(this.core.IDBFS,{},e),t(!0)}catch(e){r(`Failed to mount root FS: ${e?.message??e??""}`)}}))}listenToWorker(e,t,r){e.addEventListener(t,r)}async fetchASRBundlePlatform(e){let t;const r=await fetch(e);if(!(r.status>=200&&r.status<=299))throw Error(`Failed to fetch ASR bundle: ${r.status??r.statusText}`);if(console.log("ASR bundle retrieved"),t=await r.arrayBuffer(),!t)throw Error(`ASR bundle has corrupt or empty data: ${r.status??r.statusText}`);try{return"gzip"!==r.headers.get("Content-Encoding")&&(t=await hr(t).buffer),await n(t).progress((e=>{this.ASRBundlePersistFile(e)})),await this.syncFS(!1,"post-untar fetchASRBundlePlatform"),console.log("bundle fetched and persisted"),!0}catch(e){throw console.error("Failed to fetch ASR bundle.",e),Error("Failed to fetch ASR bundle.")}}async ASRBundlePersistFile(e){console.log(`${e.name} extracted from tar`);const t=gr.BUNDLES_DIR+gr.DIR_SEP+e.name;try{if("5"===e.type)return console.log(`${t} creating directory`),await this.makeDir(t),!0;if("0"===e.type){if(!this.core)throw Error("Core is undefined");const r=this.core.FS.open(t,"w+"),i=new Uint8Array(e.buffer);return this.core?.FS.write(r,i,0,i.byteLength,0),console.log(`${t} file persisted`),!0}{const t=`${e} other file type found, please report this use case`;throw console.error(t),new Error(t)}}catch(e){if(e.errno!==this.core?.ERRNO_CODES.EEXIST)throw new Error(e.message);return console.log(`${t} already exists`),!0}}};export{yr as default};
